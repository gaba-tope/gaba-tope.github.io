<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" hreflang="en" /><updated>2024-06-19T16:53:19+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Tope’s Cytoplasm</title><subtitle>Tope&apos;s personal blog
</subtitle><author><name>Tope</name></author><entry xml:lang="ko"><title type="html">[NHST] 4장. NHST에 대한 오해와 물음들</title><link href="http://localhost:4000/blog/2024/05/29/p-val-4.html" rel="alternate" type="text/html" title="[NHST] 4장. NHST에 대한 오해와 물음들" /><published>2024-05-29T00:00:00+09:00</published><updated>2024-05-29T00:00:00+09:00</updated><id>http://localhost:4000/blog/2024/05/29/p-val-4</id><content type="html" xml:base="http://localhost:4000/blog/2024/05/29/p-val-4.html"><![CDATA[<h2 id="머리말">머리말</h2>
<p>지금까지 frequentist test에서 사용되는 개념, 방법, $p$-value의 특징과 의미를 살펴보았습니다. 이번 절에서는 NHST에 관한 오해와 질문들을, 특히 $p$-value에 관해서 살펴보겠습니다.
<!--more--></p>

<p>이 절은 Greenland et al. (2016)의 글 <a href="https://doi.org/10.1007/s10654-016-0149-3" target="_blank">‘Statistical tests, P values, confidence intervals, and power: a guide to misinterpretations’</a>와 Daniël Lakens의 「<a href="https://lakens.github.io/statistical_inferences/">Improving Your Statistical Inferences</a>」를 참고하여 정리한 내용입니다.</p>

<ul>
  <li>제가 통계학 전공자가 아니라는 점을 기억하시고, 이 글에 통계학적으로 잘못된 서술이 있을 수 있다는 점을 유념하여 비판적으로 읽어주길 바라요. 오류를 발견하면 언제든 이야기해주세요.</li>
  <li>글의 내용을 다른 곳에 인용하실 때에는 이 <strong>글의 출처와 함께 원문의 서지 정보를 필히 밝혀</strong>주세요.</li>
</ul>

<p><strong>Null Statistical Hypothesis Testing</strong> 정리하기 (4/4)</p>

<p><a href="/blog/2024/05/22/p-val-1.html">1장. 통계적 가설검정의 개념</a></p>

<p><a href="/blog/2024/05/23/p-val-2.html">2장. p-value의 특징</a></p>

<p><a href="/blog/2024/05/28/p-val-3.html">3장. p-value를 제대로 보고하기</a></p>

<p><a href="/blog/2024/05/29/p-val-4.html">4장. p-value와 error rate에 대한 오해와 물음</a> <strong>←</strong></p>

<p>NHST에 관해 갖는 흔한 오해에는 무엇이 있고, 왜 그것이 오해인지 알아볼까요?</p>

<h2 id="4-1-p-value를-hypothesis에-대한-확률로-해석할-수-없다">4-1. P-value를 hypothesis에 대한 확률로 해석할 수 없다.</h2>
<p><strong>$p$-value는 $H_0$에 대한 확률이 아닙니다</strong> (<a href="#9cd7a5">Greenland et al., 2016</a>).  $p$-value는 $P(Data\mid H_0)$이지, $p(H_0\mid Data)$가 아니기 때문입니다. 즉, $p$-value는 이미 $H_0$가 참이라는 가정 하에 계산되었으므로, $H_0$가 참이거나 거짓일 확률과는 무관합니다.</p>
<ol>
  <li><strong>오해: “$p$-value가 통계적으로 유의하지 않을 때 null hypothesis ($H_0$)가 참이다”</strong> <strong>(X)</strong>
    <ol>
      <li>“$p$-value가 유의하지 않을 때 $H_0$가 참이다”라는 진술은 $H_0$가 참일 확률이 100%라는 의미를 내포합니다. 이는 $p$-value가 $H_0$에 대한 확률에 대해 말해주는 것이 있다는 의미이므로 잘못된 진술입니다.</li>
      <li>
        <p>$p$-value가 통계적으로 유의하지 않더라도, observed test statistic이 null model보다 alternative model에서 나올 가능성이 더 높을 수 있습니다.</p>

        <p align="left">
     <img src="/files/img/normal_two.svg" width="80%" />
 </p>
      </li>
    </ol>
  </li>
  <li><strong>오해: “$p$-value가 통계적으로 유의하다면 null hypothesis ($H_0$)가 거짓이다”</strong> <strong>(X)</strong>
    <ol>
      <li>“$p$-value가 유의할 때 $H_0$가 거짓이다”라는 진술은 $H_0$가 거짓일 확률이 100%라는 의미를 내포합니다. 이는 $p$-value가 $H_0$에 대한 확률에 대해 말해주는 것이 있다는 의미이므로 잘못된 진술입니다.</li>
      <li>$p$-value가 통계적으로 유의하더라도 $H_0$가 사실은 참이었을 가능성을 배제할 수 없습니다. 즉, test 결과로 $H_0$를 기각하는 행위가 type I error일 가능성을 배제할 수 없다는 말입니다. Neyman–Pearson은 이 상황을 두고 “null hypothesis가 거짓인 것처럼 <em>행동</em>하자 (<em>act</em> as if the null hypothesis is false)”고, “장기적으로 우리가 틀릴 확률은 5%가 안될 것이다 (not be wrong more than 5% of the time in the long run).”라고 결론 내리겠죠? $H_0$가 참 또는 거짓인 것처럼 <em>행동 (act)</em> 하는 것은 $H_0$가 참이나 거짓이라고 믿는 것과는 다릅니다 (<a href="#83ef58">Lakens, 2024, 1.7절</a>).</li>
      <li>작은 $p$-value는 <strong>$H_0$ 를 포함한 모든 가정이 만족된 모델 상</strong>에서 관측 데이터가 드문 (unusual) 경우임을 나타냅니다. 그러므로 $p$가 작다고 하여 관측한 데이터가 드문 경우라고 바로 결론 내릴 수는 없습니다<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>. Random error가 매우 큰 경우이거나, 만족되었다고 간주된 가정이 사실은 위배된 경우일 수 있기 때문입니다. 특히 이때의 가정들은 test statistics에 관한 가정뿐만 아니라 표본 추출, 실험군 배정 및 결측치 발생에서의 무작위성 (randomness)에 관한 가정, 나아가 $p$-value가 연구결과 보고를 위해서 임의의 기준에 따라 선택되지 않았다는 가정 또한 포함합니다 (<a href="#9cd7a5">Greenland, 2016</a>).</li>
    </ol>
  </li>
  <li><strong>오해: “$p = 0.03 &lt; \alpha$로  통계적으로 유의한 경우, 이 결과가 type I error일 확률은 3%이다”</strong> <strong>(X)</strong>
    <ol>
      <li>“$p$-value가 type I error rate이다”라는 진술은 $p$-value가 $H_0$가 참일 때 잘못 기각하는 확률이라는 의미로서, 이는  $p$-value가 $H_0$에 대한 확률에 대해 말해주는 것이 있다는 의미이므로 잘못된 진술입니다.</li>
      <li>$H_0$가 참인데 우리가 얻은 test 결과가 $p = 0.03 &lt; \alpha$라면, 이것은 100% type I error인 것이죠.</li>
      <li>$p$-value와 $\alpha$ 모두 $H_0$가 참인 null model에서의 tail-area probability이며 $p$와 $\alpha$를 비교하여 의사결정을 한다는 점에서 $p$-value가 data를 기반으로 계산된 type I error rate인 것으로 이해하기 쉽지만, 이는 $p$-value라는 개념을 잘못 이해한 것입니다. (<a href="#aa0559">Goodman, 1999</a>).</li>
      <li>“$p&lt;0.05$를 얻었을 때 $H_0$가 참 (또는 거짓)일 확률은 무엇인가?”라는 질문은 “$H_0$가 참일 때 우리가 얻은 데이터 (또는 그보다 더 극단적인 데이터)를 얻을 확률은 무엇인가?”라는 질문과 다릅니다. $p$-value는 두 번째 질문에 대한 답만을 줄 수 있습니다 (<a href="#83ef58">Lakens, 2024, 1.7.4절</a>).</li>
    </ol>
  </li>
</ol>

<h2 id="4-2-p-value가-통계적으로-유의한지는-실제로-중요한지와는-무관하다">4-2. p-value가 통계적으로 유의한지는 ‘실제로’ 중요한지와는 무관하다.</h2>
<ul>
  <li>$p$-value가 통계적으로 유의한지, 즉 $p&lt;\alpha$인지 아닌지는 effect size의 크기와는 무관합니다. $p &lt; 0.05$라거나 $p = 0.002$와 같은 $p$-value만으로는 평균의 차이가 얼마나 나는지 알 수 없죠. 그래서 통계적으로 유의하다고 반드시 실제로 혹은 임상에서 의미있는 정도의 효과가 아닐 수 있고, 그 반대의 경우도 마찬가지입니다.</li>
  <li>즉, 통계적으로 유의한 결과는 null model하에서 ‘놀라운 (surprising)’결과인 것이지, 반드시 ‘중요한’ 결과는 아닐 수 있습니다.</li>
  <li>설령 effect의 크기가 중요하다고 하더라도, sample size가 큰 경우 effect size가 매우 작거나 가정이 약간이라도 위배되었을 때 통계적으로 유의하다는 결과가 나올 수 있습니다 (<a href="#9cd7a5">Greenland, 2016</a>).</li>
</ul>

<h2 id="4-3-p-value는-효과가-재현될-확률이-아니다">4-3. P-value는 효과가 재현될 확률이 아니다.</h2>
<ul>
  <li>하나의 연구에서 얻은 $p$를 바탕으로 효과가 재현될 확률을 계산하는 것은 불가능합니다. 효과가 재현될 확률은 미래의 sample를 대상으로 하는 test 결과에 관한 것이므로, 전체 population에 대한 지식을 알지 못하면 계산할 수 없습니다 (<a href="#5d12f0">Miller, 2009</a>). $p$-value는 현재 sample만으로 얻어진 값이므로, 이를 통해 소위 replication probability를 도출하는 것은 말도 안되는 것입니다.</li>
  <li>실제 효과가 있을 때, 어떤 test가 통계적으로 유의한 효과를 보일 확률은 power입니다 (<a href="#83ef58">Lakens, 2024, 1.7.5절</a>).</li>
  <li>실제 효과가 없을 때, 어떤 test가 통계적으로 유의한 효과를 보일 확률은 $\le \alpha$입니다 (<a href="#83ef58">Lakens, 2024, 1.7.5절</a>).</li>
</ul>

<h2 id="4-4-p-value는-우리의-데이터가-나올-확률이-아니다">4-4. P-value는 우리의 데이터가 나올 확률이 아니다.</h2>
<ol>
  <li>$p$-value는 모든 가정이 만족되고 $H_0$가 참일 때 우리가 관측한 데이터 (혹은 통계량)이 나올 확률이 아닙니다. 이는 $p$-value의 정의를 보면 바로 알 수 있습니다. $p$-value는 $P(\tau(\mathbf{X}) \ge \tau(\mathbf{x})\mid H_0)$ 로서, $H_0$하의 null model에서 test statistic의 관측값이 나오는 것 뿐만 아니라 <em>그 이상의 극단적인 값이 관측될</em> (“observations more extreme than what we observed”) 이론적 확률을 의미하기 때문입니다.</li>
  <li>이에 관해서는 <a href="/blog/2024/05/22/p-val-1.html#1-1-fishers-test-of-significance" target="_blank">1-1절</a>의 “$p$-value가 작다면 (1) test statistic이 관측된 상황이 매우 드문 사건이거나, (2) 가설로 상정된 null hypothesis가 타당하지 않은 가설이거나의 두 경우로 해석될 수 있다”라는 진술의 (1)이 통계학적으로 아주 엄밀한 문장은 아니라는 점을 짚어볼 필요가 있습니다.
    <ul>
      <li>“Either $H_0$ is true and a rare event has occured, or $H_0$  is false”라는 논리에서 ‘rare event’는 실제 관측통계량 $\tau(\mathbf{x})$를 관측하는 event가 아니라, 실제 관측통계량과 그보다 더 극단적인 (“more extreme”) 통계량을 얻는 event \(E = \{\text{possible data }x: \lvert\tau(\mathbf{X})\rvert \ge \lvert\tau(\mathbf{x})\rvert\}\)입니다. 그래서 ‘rare event’가 test statistic이 관측된 상황, 즉 $\tau(\mathbf{x})$를 관측하는 event라고 말하는 것은, $E$와 $\mathbf{x}$를 구별하지 않는 것입니다 (<a href="#89420d">Berger &amp; Delampady, 1987</a>).</li>
      <li>이때 $\mathbf{X} = \mathbf{x}$라고 하는 것과 $\mathbf{X} \in E$라고 말하는 것에는 차이가 있습니다. $\mathbf{X} \in E$는 $H_0$를 기각할 <strong>훨씬 더 강한 증거</strong>라는 점에서 그렇습니다
        <ul>
          <li>가령 ‘동전의 앞뒷면이 나올 확률이 $0.5\%$로 같다’라는 명제가 $H_0$라 합시다. 동전을 $100$번 던져서 앞면이 $60$번 나왔습니다. $\mathbf{X} = \mathbf{x} = 60$은 $H_0$를 적당히 신뢰하지 않을 정도라는 생각을 들게 하지만, $\mathbf{X} \in E$는 100번 중 60번 <em>이상의 극단 값</em>에서 앞면이 나왔다는 의미로서 $H_0$를 신뢰하지 않을 이유가 더 강해지는 것입니다.</li>
          <li><del>Berger와 Selke는 $P(H_0\mid E)$가 흔히 $P$-value와 매우 가까워서 $P(H_0\mid \mathbf{x})$보다 작다는 것을 보인 바 있다 (<a href="#3cc52e">Berger &amp; Selke, 1987</a>).</del> (레퍼 직접 읽고 이해하고 확인해야함.)</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h2 id="4-5-alpha는-발표된-연구-중-type-i-error가-있을-확률이-아니다">4-5. alpha는 발표된 연구 중 type I error가 있을 확률이 아니다.</h2>
<p>이 항목은 Lakens의 글 2.2절을 주로 참고하였습니다.
$\alpha = 0.05$일 때 발표된 연구의 최대 $5\%$가 type I error일 것이다’ 라는 진술은 거짓입니다.</p>
<ol>
  <li>Type I error rate은 ‘실제로는 효과가 없을 때 효과가 있다고 잘못 결론짓는 오류 확률’로서, ‘연구가 통계적으로 유의한 결과를 보였을 때 그것이 실제 효과가 있을 확률’과는 구별됩니다.
    <ul>
      <li>$\alpha = P(\text{statistically significant result }\mid \text{ no actual effect})$ 인 반면,</li>
      <li>해당 물음은 $P(\text{no actual effect } \mid \text{ statistically significant result})$를 의미하는 것이죠.</li>
    </ul>
  </li>
  <li>후자의 확률은 <strong>false positive report probability (false positive risk; false discovery rate)</strong> 라 불리고, 이와 반대되는 확률은 <strong>positive predictive value (PPV)</strong> 로 불립니다. \(\begin{align}PPV &amp;= \frac{\text{True Positives}}{\text{True Positives + False Positives}}\\\\FDR = FPRP &amp;= \frac{\text{False Positives}}{\text{True Positives + False Positives}}\end{align}\)</li>
  <li>연구 결과는 통계적으로 유의한 결과와 그렇지 않은 결과 모두를 얻게 되지만, 연구를 발표할 때는 통계적으로 유의한 결과 위주로 보고하는 편향이 발생하곤 합니다. 그래서 $\alpha = 0.05$로 하는 test를 수행하여도, 실제 보고되는 결과는 통계적으로 유의한 결과가 위주가 되므로 $FDR$는 $5\%$보다 클 수 있습니다.</li>
</ol>

<h2 id="4-6-p-value는-증거의-척도-measures-of-evidence인가">4-6. p-value는 증거의 척도 (measures of evidence)인가?</h2>
<ol>
  <li>Lakens는 $p$-value를 <em>증거</em>의 척도 (measures of <em>evidence</em>)로 해석하는 것이 통계학적으로 옳지 않다고 설명합니다.
    <ol>
      <li>$H_0$가 실제로 참일 때 $p$-value가 uniform distribution을 따른다는 사실과 Lindley’s paradox를 고려하면, $p$-value 단독을 증거의 척도로 이해하는 것은 옳지 않습니다.</li>
      <li>$p$-value가 증거의 척도라고 주장하는 이들은 ‘증거’ (evidence)의 개념을 정의하지 않습니다.
        <ul>
          <li>Lakens는 ‘증거 (evidence)’에 관한 Shafer의 이론을 따라서, 증거 (evidence)가 support function을 통해 정량될 수 있고, 통계적 증거를 평가할 때에 support는 likelihood function을 통해 정량될 수 있다고 설명합니다 (<a href="#1b1f90">Shafer, 1976, p. 144</a>. 재인용: <a href="#83ef58">Lakens, 2024, 1.6절</a>)<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>.</li>
        </ul>
      </li>
    </ol>
  </li>
  <li>한편 Greenland는 $p$-value가 <strong>증거의 척도로 쓰이는 경우</strong>와 <strong>의사결정을 위한 random variable로 쓰이는 경우</strong>로 구별되어 이해될 수 있다고 봅니다 (<a href="#30bdb1">Greenland, 2023</a>). $p$-value가 증거의 척도가 아니라고 주장하는 이들은 Neyman–Pearson framework에서의 $p$-value에만 초점을 두고 있다는 것이지요.
    <ol>
      <li>Greenland에 따르면 frequentist statistics에서 사용하는 $P$-value는 두 가지 정의가 있습니다.
        <ul>
          <li><strong>divergence $p$-value</strong>: Model과 observed statistics 간의 차이를 나타내는 $p$-value. 즉, 데이터와 모델의 차이 (divergence)를 나타냅니다.</li>
          <li><strong>decision $p$-value</strong>: 전체 sample space에 걸쳐 이분법적 결정 규칙을 표현하기 위한 random variable로서의 $p$-value 또는 그러한 random variable의 관측값. Decision $p$-value는 $H_0$와 $H_a$ 중 하나를 고르기 위해 사용됩니다.</li>
        </ul>
      </li>
      <li>증거 (evidence)의 정의에 관한 단일한 합의점은 없지만, Fisher의 framework에서 $p$-value는 observed <strong>data와 null model 사이의</strong> compatibility 내지 <strong>divergence에 대한 일관된 척도(coherent measures)</strong> 로서, 어떠한 모델이나 가설에 대항하는(against) 증거의 척도 (measure of evidence)로 사용될 수 있다고 보여집니다.</li>
    </ol>
  </li>
</ol>

<p>저는 잠정적으로 Greenland의 설명이 더 설득력있다고 생각합니다. <a href="#a0c299">Lavine (2024)</a>의 연구와 같이 $p$-value가 증거의 척도가 아니라고 주장하는 문헌이 여럿 있고 살펴볼 필요가 있어 보이는데, 적어도 Lakens의 지적은 충분하지 않은 것 같습니다. $H_0$가 참일 때 $p$-value가 uniform distribution을 따르고 Lindley’s paradox가 존재한다는 점이 보여졌다고 하여도, 이는 Neyman-Pearson framework에서의 지적이기 때문입니다. Fisherian framework에서는 $p$-value가 개별 실험의 관측값과 모델 간의 양립가능성(compatibility)을 나타내는 척도로 이해되지 못할 이유가 없는 것 같네요.</p>

<p>물론 두 관점을 적절하지 않게 혼동하는 일은 없어야 하겠습니다. 가령 $p$가 0.05보다 작아질 수록 $H_0$를 기각하거나 $H_1$를 수용할 이유가 커진다고 말하는 것은 적절하지 않겠죠? 기본적으로 $p$-value는 Fisher의 test에서 사용되는 개념이고, Fisher의 test of significance는 기각-수용이라는 의사결정을 목적으로 하지 않습니다. $p$는 그저 $H_0$가 data와 일치하지 않는 정도를 보여주는 것입니다. 이는 <a href="/blog/2024/05/22/p-val-1.html#1-1-fishers-test-of-significance" target="_blank">1-1절</a>에서도 이야기한 바 있습니다.</p>

<h2 id="4-7-h0는-언제나-거짓이-아닌가">4-7. H0는 언제나 거짓이 아닌가?</h2>
<ol>
  <li>NHST에 가해지는 비판 중 대표적인 것 중 하나가 null hypothesis ($H_0$)가 사실인 경우는 보통 없다는 주장입니다.
    <ol>
      <li>Tukey는 “A와 B의 효과가 다른가”라는 질문에 “They are always different for some decimal place” (“소숫점 몇째 자리까지 보면 항상 다르겠지”)라고 답하며 NHST를 비판하였습니다 (<a href="#62f187">Tukey, 1991</a>).</li>
      <li>Meehl은 적어도 soft psychology 분야에서 “… as I believe is generally recognized by statisticians today and by thoughtful social scientists, the null hypothesis, taken literally, is always false” 라며 $H_0$가 언제나 거짓이라고 설명합니다 (<a href="#be9d84">Meehl, 1978</a>).</li>
      <li>Cohen도 다음과 같이 null hypothesis가 언제나 거짓이라고 설명합니다 (<a href="#07cba5">Cohen, 1990</a>):
        <blockquote>
          <p>The null hypothesis, taken literally (and that’s the only way you can take it in formal hypothesis testing), is <em>always</em> false in the real world. It can only be true in the bowels of a computer processor running a Monte Carlo study (and even then a stray electron may make it false). If it is false, even to a tiny degree, it must be the case that a large enough sample will produce a significant result and lead to its rejection. So if the null hypothesis is always false, what’s the big deal about rejecting it?</p>
        </blockquote>
      </li>
      <li>즉, $H_0$가 언제나 거짓이라면 이를 기각하는 것이 의미가 없다는 것입니다.</li>
    </ol>
  </li>
  <li>하지만 Tukey를 비롯한 학자들의 이러한 견해가 가설 검정에 관한 잘못된 이해에서 비롯하며, NHST가 의미없다는 비판이 유효하지 않다는 반박도 있습니다:
    <ol>
      <li>Point null (e.g. $\theta = \theta_0$)을 사용하는 것은 현실의 문제에 적절한 근사를 제공하므로 유용합니다 (<a href="#3cc52e">Berger &amp; Selke, 1987</a>). Berger와 Selke는 실제로는 $H_0 : \vert \theta − \theta_0 \vert \le b$라는 가설을 사용하는 것이 타당하지만, 대개 $b$는 충분히 작으며 충분히 작은 $b$에 대해서는 $H_0 : \theta = \theta_0$ 로 근사될 수 있다는 결론을 내립니다. (<strong>아직 직접 읽고 이해하지 못함. Berger&amp;Selke와 Berger&amp;Delampady 둘다 보기.</strong>)</li>
      <li>
        <p>모집단 간 평균 차이가 아주 미미할 때 $H_0$ 를 기각하기 위해서는 sample size가 상당히 커야합니다. 가령 two-sided $t$-test ($\alpha = 0.05, \beta = 0.8$)에서 Cohen’s $d = 0.001$인 정도로 미미한 차이를 기각하기 위해서는 $n_1 + n_2 \approx 31,000,000$의 표본이 필요합니다. Sample size가 저렇게 크지 않은 대부분의 상황에서는 미미한 차이가 있어도 $H_0$ 가 기각되지 않으므로 $H_0$가 가설로 적절하다는 주장입니다.</p>

        <p>주제에서 벗어나긴 하지만… sample size가 어떻게 계산되는지 잠깐 알아볼까요? $\sigma$가 알려져 있고 $\mu_1 - \mu_2 = \Delta$라 합시다. $\alpha = 0.05$이도록 하는 critical region $C$는 $1.96$입니다. $Z = \frac{(\bar{X_1}-\bar{X_2}-\Delta)}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}} \sim N(0, 1)$인 $Z$와 test statistic $T$에 대해, power는 다음과 같이 계산됩니다:\(\begin{align}power = \Pr(T &gt; C \mid \mu_1 \ne \mu_2) &amp;= \Pr\Biggr(\frac{\bar{X_1}-\bar{X_2}}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}} &gt; 1.96\Biggl) \\&amp;= \Pr\Biggr(\frac{\bar{X_1}-\bar{X_2} - \Delta}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}} &gt; 1.96 - \frac{\Delta}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}}\Biggl) \\&amp;= \Pr\Biggr(Z &gt; 1.96 - \frac{\Delta}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}}\Biggl) \end{align}\)</p>

        <p>$\sigma_1=\sigma_2 = 1$, $\Delta = 0.001$이고 $n_1 = n_2 = n$인 경우, power는 $\Pr(Z&gt;1.96 - \frac{0.001\sqrt{n}}{\sqrt{2}})$이고, 바로 이 power가 $80\%$이도록 하는 $n$을 찾으면 됩니다.</p>
        <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">qnorm</span><span class="p">(</span><span class="m">0.025</span><span class="p">,</span><span class="w"> </span><span class="n">lower.tail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
 </span><span class="n">sd</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="m">2</span><span class="p">)</span><span class="w">
 </span><span class="n">power</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">quote</span><span class="p">({</span><span class="w"> </span><span class="n">pnorm</span><span class="p">(</span><span class="n">C</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.001</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sd</span><span class="p">,</span><span class="w"> </span><span class="n">lower.tail</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="c1"># not evaluated</span><span class="w">

 </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">uniroot</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="n">eval</span><span class="p">(</span><span class="n">power</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1e-10</span><span class="p">,</span><span class="w"> </span><span class="m">1e+09</span><span class="p">))</span><span class="o">$</span><span class="n">root</span><span class="w"> </span><span class="c1"># solve the equation</span><span class="w">

 </span><span class="n">n</span><span class="w">
 </span><span class="c1">#&gt; [1] 15697759</span><span class="w">
</span></code></pre></div>        </div>
        <p>$n_1 + n_2 = 2n = 31,395,519$임을 확인할 수 있습니다.</p>
      </li>
      <li>NHST는 sample을 통해 현실 세계에 있는 모집단에 관한 정보를 얻기 위해 사용하는 도구입니다. Lakens는 위의 반박들이 NHST를 통해 알고자 하는 ‘현실 세계 (real world)’가 무엇인지 놓치고 있다고 주장합니다 (<a href="#bee925">Lakens, 2014</a>).
        <ul>
          <li>현실 세계에서는 지금 이 순간에도 사람들이 죽고 태어나고 있습니다. 오늘 측정한 모집단의 parameter는 내일 측정한 모집단의 parameter와 분명 다를 것입니다.</li>
          <li>하지만 NHST에서는 특정한 시점의 parameter가 정확히 어떤 값인지가 중요한 것이 아닙니다. NHST를 통해 우리는 현실 세계에 대한 <strong>일반화되고 평균적인 진술</strong>의 참거짓 판단에 <em>참고할만한</em> 자료를 얻고자 하기 때문이죠. 그러므로 $H_0: \theta = \theta_0$가 언제나 잘못되었다는 사실이 point null hypothesis가 NHST에서 쓰이지 못할 이유가 되지 않습니다.</li>
        </ul>
      </li>
    </ol>
  </li>
</ol>

<h2 id="reference">Reference</h2>
<ul>
  <li><a id="89420d"></a> Berger, J. O., &amp; Delampady, M. (1987). Testing Precise Hypotheses. <em>Statistical Science, 2</em>(3), 317-335. <a href="https://doi.org/10.1214/ss/1177013238" target="_blank">https://doi.org/10.1214/ss/1177013238</a></li>
  <li><a id="3cc52e"></a> Berger, J. O., &amp; Sellke, T. (1987). Testing a Point Null Hypothesis: The Irreconcilability of P Values and Evidence. <em>Journal of the American Statistical Association, 82</em>(397), 112-122. <a href="https://doi.org/10.2307/2289131" target="_blank">https://doi.org/10.2307/2289131</a></li>
  <li><a id="07cba5"></a> Cohen, J. (1990). Things I have learned (so far).<em>American Psychologist, 45</em>(12), 1304-1312. <a href="https://doi.org/10.1037/0003-066X.45.12.1304" target="_blank">https://doi.org/10.1037/0003-066X.45.12.1304</a></li>
  <li><a id="ca70e2"></a> Edgington, E. S. (1965). The assumption of homogeneity of variance for the “t” test and nonparametric tests. <em>Journal of Psychology, 59</em>, 177.</li>
  <li><a id="aa0559"></a> Goodman, S. N. (1999). Toward Evidence-Based Medical Statistics. 1: The P Value Fallacy. <em>Annals of Internal Medicine, 130</em>(12), 995-1004. <a href="https://doi.org/10.7326/0003-4819-130-12-199906150-00008" target="_blank">https://doi.org/10.7326/0003-4819-130-12-199906150-00008</a></li>
  <li><a id="9cd7a5"></a> Greenland, S., Senn, S. J., Rothman, K. J., Carlin, J. B., Poole, C., Goodman, S. N., &amp; Altman, D. G. (2016). Statistical tests, P values, confidence intervals, and power: a guide to misinterpretations. <em>European Journal of Epidemiology, 31</em>(4), 337-350. <a href="https://doi.org/10.1007/s10654-016-0149-3" target="_blank">https://doi.org/10.1007/s10654-016-0149-3</a></li>
  <li><a id="bee925"></a> Lakens, D. (2014, June 12). The Null Is Always False (Except When It Is True). <em>The 20% Statistician</em>. <a href="https://daniellakens.blogspot.com/2014/06/the-null-is-always-false-except-when-it.html" target="_blank">https://daniellakens.blogspot.com/2014/06/the-null-is-always-false-except-when-it.html</a></li>
  <li><a id="83ef58"></a> Lakens, D. (2024). <em>Improving Your Statistical Inference</em> (1.4.5 ed.). <a href="https://lakens.github.io/statistical_inferences" target="_blank">https://lakens.github.io/statistical_inferences</a></li>
  <li><a id="a0c299"></a> Lavine, M. (2024). P-values don’t measure evidence. <em>Communications in Statistics - Theory and Methods, 53</em>(2), 718-726. https://doi.org/10.1080/03610926.2022.2091783</li>
  <li><a id="be9d84"></a> Meehl, P. E. (1978). Theoretical risks and tabular asterisks: Sir Karl, Sir Ronald, and the slow progress of soft psychology. <em>Journal of Consulting and Clinical Psychology, 46</em>(4), 806-834. <a href="https://doi.org/10.1037/0022-006X.46.4.806" target="_blank">https://doi.org/10.1037/0022-006X.46.4.806</a></li>
  <li><a id="5d12f0"></a> Miller, J. (2009). What is the probability of replicating a statistically significant effect? <em>Psychonomic Bulletin &amp; Review, 16</em>(4), 617-640. <a href="https://doi.org/10.3758/pbr.16.4.617" target="_blank">https://doi.org/10.3758/pbr.16.4.617</a></li>
  <li><a id="1b1f90"></a> Shafer, G. (1976). <em>A mathematical theory of evidence</em>. Princeton University Press.</li>
  <li><a id="62f187"></a> Tukey, J. W. (1991). The Philosophy of Multiple Comparisons. <em>Statistical Science, 6</em>(1), 100-116. <a href="http://www.jstor.org/stable/2245714" target="_blank">http://www.jstor.org/stable/2245714</a></li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Edgington의 연구를 사례로 들어, $p = 0.01 &lt; 0.05 = \alpha$인 상황을 고려해 보자. (1) 만약 아무런 가정없이 $p = 0.01$이 나왔는데 $H_0: \mu_1 = \mu_2$를 기각하였다면, independent identically distributed(i.i.d) normal population에서 random sampling되지 않았을 수 있다고 반박할 수 있겠다. (2) 만약 i.i.d. normal population에서 random sampling되었다는 가정이 전제되었을 때 $H_0$를 기각하였다면, $\mu$에서 차이가 발생한 것이었을 수 있지만 $\sigma^2$에서 차이가 발생한 경우일 수도 있다. (3) 만약 i.i.d. normal, homoscedastic population에서 random sampling되었다는 가정이 전제된다면 그때야말로 $H_0: \mu_1 = \mu_2$에 관한 기각 여부를 다룰 수 있는 것이다. (<a href="#ca70e2">Edgington, 1965</a>) <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>Evidence가 likelihood에 의해 정량될 수 있다는 주장에 대해, Greenland는 likelihood function이 evidence를 포착하는데 실패하며 likelihood가 evidence의 모든 측면을 아우르지도 않는다는 여러 연구를 제시하면서 statistical evidence에 대한 합의된 단일 정의는 없다고 본다 (<a href="#30bdb1">Greenland, 2023</a>). <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Tope</name></author><category term="blog" /><category term="statistics" /><summary type="html"><![CDATA[머리말 지금까지 frequentist test에서 사용되는 개념, 방법, $p$-value의 특징과 의미를 살펴보았습니다. 이번 절에서는 NHST에 관한 오해와 질문들을, 특히 $p$-value에 관해서 살펴보겠습니다.]]></summary></entry><entry xml:lang="ko"><title type="html">[NHST] 3장. p-value를 제대로 보고하기</title><link href="http://localhost:4000/blog/2024/05/28/p-val-3.html" rel="alternate" type="text/html" title="[NHST] 3장. p-value를 제대로 보고하기" /><published>2024-05-28T00:00:00+09:00</published><updated>2024-05-28T00:00:00+09:00</updated><id>http://localhost:4000/blog/2024/05/28/p-val-3</id><content type="html" xml:base="http://localhost:4000/blog/2024/05/28/p-val-3.html"><![CDATA[<h2 id="머리말">머리말</h2>
<p>Test로 얻은 $p$-value를 그대로 보고할 것이 권장되고 있습니다. 왜일까요? Neyman-Pearson에 따르면, $\alpha$와 power를 사전에 정하여 시행한 test는 의사결정을 위한 것이 아니었던가요? $p&lt;\alpha$인지, 그래서 $H_0$가 reject되었는지만 보고하면 되는 것이 아니었나요? 이번 장에서는 그렇지 않다는 것을 설명하겠습니다. $p$-value를 그대로 보고해야 하는 이유를 그 수단적 측면과 의미적 측면을 중심으로 알아볼 것입니다.
<!--more--></p>

<p>아래의 내용은 Daniël Lakens의 「<a href="https://lakens.github.io/statistical_inferences/">Improving Your Statistical Inferences</a>」를 바탕으로 여러 문헌을 공부하며 정리한 내용입니다.</p>

<ul>
  <li>제가 통계학 전공자가 아니라는 점을 기억하시고, 이 글에 통계학적으로 잘못된 서술이 있을 수 있다는 점을 유념하여 비판적으로 읽어주길 바라요. 오류를 발견하면 언제든 이야기해주세요.</li>
  <li>글의 내용을 다른 곳에 인용하실 때에는 이 <strong>글의 출처와 함께 원문의 서지 정보를 필히 밝혀</strong>주세요.</li>
</ul>

<p><strong>Null Statistical Hypothesis Testing</strong> 정리하기 (3/4)</p>

<p><a href="/blog/2024/05/22/p-val-1.html">1장. 통계적 가설검정의 개념</a></p>

<p><a href="/blog/2024/05/23/p-val-2.html">2장. p value의 특징</a></p>

<p><a href="/blog/2024/05/28/p-val-3.html">3장. p-value를 제대로 보고하기</a> <strong>←</strong></p>

<p><a href="/blog/2024/05/29/p-val-4.html">4장. p-value와 error rate에 대한 오해와 물음</a></p>

<h2 id="p-value의-값을-보고하기">p-value의 ‘값’을 보고하기</h2>
<p>Neyman–Pearson의 test의 목적은 $H_0$와 $H_1$중 하나를 <strong>선택</strong>하려는 것이었기 때문에 ‘$p&lt;\alpha$’ 또는 ‘$p&gt;\alpha$’만 보고해도 충분했습니다. 하지만 현대의 NHST에서는 <strong>언제나 exact $p$-value를 보고하는 것이 적절</strong>합니다. 몇 가지 이유가 있는데요:</p>

<ol>
  <li>$p$-value를 그대로 보고하는 것은 다른 연구자들의 2차 분석에 도움이 됩니다 (<a href="#96ea11">Appelbaum et al., 2018</a>).</li>
  <li>$p$-value를 다른 연구자들로 하여금 그들이 기준으로 삼고자 하는 $\alpha$값과 비교할 수 있도록 하기 위해 $p$-value를 그대로 보고하는 것이 권장됩니다 (<a href="#fa997a">Lehmann &amp; Romano, 2005, p. 64</a>).</li>
  <li>N–P test에서 $\alpha$를 사전에 지정하여 기준으로 사용하는 것이 자의적이라는 비판도 있습니다 (<a href="#4e6fe6">Murtaugh, 2014</a>).
    <ul>
      <li>가령 $\alpha = 0.05$를 사전에 정해두고 test 결과로 $p = 0.049$ 또는 $p = 0.051$이 나온 상황에서 $p$-value가 $0.05$미만/초과라는 이유로 $H_0$를 기각/수용해야한다고 하는 것은 타당하지 않은 것처럼 보입니다. 실제 $p$-value 값을 보고하도록 하는 것은 이같은 비판에 대한 보완책이 될 수 있습니다.</li>
      <li>여러 저널들의 통계 데이터 보고 가이드라인은 통계 검정의 결과를 다룰 때 실제 $p$-value 값을 보고하고,  confidence interval, sample size, effect size 등을 명시하도록 합니다 (<a href="#24dd25">Aguinis, 2021</a>; <a href="#890901">Hardwicke et al., 2023</a>).</li>
    </ul>
  </li>
</ol>

<h2 id="p-value의-의미에-초점을-두면">p-value의 의미에 초점을 두면:</h2>
<p>Neyman–Pearson test에서 $p$-value를 maximum type I error rate인 $\alpha$와 비교하여 $H_0$에 대한 의사결정을 내리게 됩니다. 하지만 $\alpha$는 long-term probability이기 때문에, 일회성의 연구에서 내린 <strong>의사결정이 오류일 가능성은 언제든</strong> 있습니다.</p>

<p>그래서 <strong>재현 연구 (replication study)가 중요</strong>합니다. 연구 한 번에서 얻은 결과는 오류일 수 있지만, 이러한 결론이 다른 연구에서도 재현된다면 이것이 오류일 가능성이 줄어들기 때문입니다 (<a href="#83ef58">Lakens, 2024, 1.6절</a>).</p>
<ol>
  <li>Laken이 보기에 statistically significant<sup>통계적으로 유의한</sup> 결과에 대한 정확한 서술은 다음과 같습니다:
    <blockquote>
      <p>“우리는 [연구 결과에] non-zero effect이 있다고 주장한다. 동시에 우리는 이러한 방법론적 과정을 따라 과학자들이 [어떤] 주장을 한다면, 그중 장기적으로는 많아야 $\alpha$%의 경우 — 우리가 허용할만한 범위인 — 잘못된 결론을 내릴 수 있다는 점을 인정한다. 우리의 결과가 잘못되었다는 새 데이터나 정보가 나오기 전까지, 당분간은 우리의 주장이 옳은 것으로 상정하자.”<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></p>
    </blockquote>
  </li>
  <li>그가 보기에 statistically insignificant<sup>통계적으로 유의하지 않은</sup> 결과에 대한 정확한 서술은 다음과 같습니다:
    <blockquote>
      <p>“우리는 [연구 결과에] non-zero effect이 있다고 주장할 수 없다. 동시에 우리는 과학자들이 이러한 방법론적 과정을 따라 [어떤] 주장을 하지 않는다면, 장기적으로 $\beta$%의 경우 — 우리가 허용할만한 범위인 —  잘못된 결론을 내릴 수 있다는 점을 인정한다.”<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></p>
    </blockquote>
  </li>
  <li>
    <p>그러므로 N–P test에서 가설을 선택하는 것은 그 가설이 <strong>참이라고 믿는 것이 아닙니다</strong> (<a href="#cf24d9">Neyman, 1950, pp.259-260.</a> 재인용: <a href="#fd2842">Morimoto, 2021</a>).</p>

    <ul>
      <li>다시 말해, N–P test에서 연구자들이 가설을 ‘수용’하거나 ‘기각’할 때 이는 가설에 대한 <strong>결론이나 믿음을 표명하려는 것이 아닙니다</strong>.</li>
      <li>Lakens는 Hacking의 글을 인용하며, null model을 기각하는 것은 null model이 거짓이라고 믿을 필요 없이 우리가 <strong>오류를 저질렀을 수 있다는 것을 인지하면서 잠정적으로 기각하는 것</strong>이라고 설명합니다 (<a href="#83ef58">Lakens, 2024, 1.6절</a>).</li>
      <li>가령 N–P statistics에서 연구자들이 $H_0$를 ‘기각’하는 것은 그것이 거짓인 것처럼 행동(“act as if the null hypothesis is false”)하고 장기적으로 5%이내에서 틀릴 수 있다는 것을 전하는 것입니다 (<a href="#83ef58">Lakens, 2024, 1.6절</a>).</li>
    </ul>
  </li>
</ol>

<h2 id="reference">Reference</h2>
<ul>
  <li>Aguinis, H., Vassar, M., &amp; Wayant, C. (2021). On reporting and interpreting statistical significance and p values in medical research. <em>BMJ Evidence-Based Medicine, 26</em>(2), 39-42. <a href="https://doi.org/10.1136/bmjebm-2019-111264" target="_blank">https://doi.org/10.1136/bmjebm-2019-111264</a>  <a id="24dd25"></a></li>
  <li>Appelbaum, M., Cooper, H., Kline, R. B., Mayo-Wilson, E., Nezu, A. M., &amp; Rao, S. M. (2018). Journal article reporting standards for quantitative research in psychology: The APA Publications and Communications Board task force report. <em>American Psychologist, 73</em>(1), 3-25. <a href="https://doi.org/10.1037/amp0000191" target="_blank">https://doi.org/10.1037/amp0000191</a>  <a id="96ea11"></a></li>
  <li>Hardwicke, T. E., Salholz-Hillel, M., Malički, M., Szűcs, D., Bendixen, T., &amp; Ioannidis, J. P. A. (2023). Statistical Guidance to Authors at Top-Ranked Journals across Scientific Disciplines. <em>The American Statistician, 77</em>(3), 239-247. <a href="https://doi.org/10.1080/00031305.2022.2143897" target="_blank">https://doi.org/10.1080/00031305.2022.2143897</a>  <a id="890901"></a></li>
  <li>Lakens, D. (2024). <em>Improving Your Statistical Inference</em> (1.4.5 ed.). <a href="https://lakens.github.io/statistical_inferences" target="_blank">https://lakens.github.io/statistical_inferences</a> <a id="83ef58"></a></li>
  <li>Lehmann, E. L., &amp; Romano, J. P. (2005). <em>Testing Statistical Hypotheses</em> (3 ed.). Springer. <a href="https://doi.org/doi.org/10.1007/0-387-27605-X" target="_blank">https://doi.org/doi.org/10.1007/0-387-27605-X</a>  <a id="fa997a"></a></li>
  <li>Morimoto, R. (2021). Stop and Think About p-Value Statistics: Fisher, Neyman, and E. Pearson Revisited. <em>Annals of the Japan Association for Philosophy of Science, 30</em>, 43-65. <a href="https://doi.org/10.4288/jafpos.30.0_43" target="_blank">https://doi.org/10.4288/jafpos.30.0_43</a>  <a id="fd2842"></a></li>
  <li>Murtaugh, P. A. (2014). In defense of <i>P</i> values. <em>Ecology, 95</em>(3), 611-617. <a href="https://doi.org/10.1890/13-0590.1" target="_blank">https://doi.org/10.1890/13-0590.1</a>  <a id="4e6fe6"></a></li>
  <li>Neyman, J. (1950). <em>First Course in Probability and Statistics</em>. Henry Holt and Company.  <a id="cf24d9"></a></li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>“We claim there is a non-zero effect, while acknowledging that if scientists make claims using this methodological procedure, they will be misled, in the long run, at most alpha % of the time, which we deem acceptable. We will, for the foreseeable future, and until new data or information emerges that proves us wrong, assume this claim is correct.” (<a href="#83ef58">Lakens, 2024, 1.6절</a>) <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>“We can not claim there is a non-zero effect, while acknowledging that if scientists refrain from making claims using this methodological procedure, they will be misled, in the long run, at most beta % of the time, which we deem acceptable.” (<a href="#83ef58">Lakens, 2024, 1.6절</a>) <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Tope</name></author><category term="blog" /><category term="statistics" /><summary type="html"><![CDATA[머리말 Test로 얻은 $p$-value를 그대로 보고할 것이 권장되고 있습니다. 왜일까요? Neyman-Pearson에 따르면, $\alpha$와 power를 사전에 정하여 시행한 test는 의사결정을 위한 것이 아니었던가요? $p&lt;\alpha$인지, 그래서 $H_0$가 reject되었는지만 보고하면 되는 것이 아니었나요? 이번 장에서는 그렇지 않다는 것을 설명하겠습니다. $p$-value를 그대로 보고해야 하는 이유를 그 수단적 측면과 의미적 측면을 중심으로 알아볼 것입니다.]]></summary></entry><entry xml:lang="ko"><title type="html">[NHST] 2장. p-value의 특징</title><link href="http://localhost:4000/blog/2024/05/23/p-val-2.html" rel="alternate" type="text/html" title="[NHST] 2장. p-value의 특징" /><published>2024-05-23T00:00:00+09:00</published><updated>2024-05-23T00:00:00+09:00</updated><id>http://localhost:4000/blog/2024/05/23/p-val-2</id><content type="html" xml:base="http://localhost:4000/blog/2024/05/23/p-val-2.html"><![CDATA[<h2 id="머리말">머리말</h2>
<p>앞 장에서 Neyman-Pearson test에서 $p$-value 개념이 핵심적이지는 않지만, 적어도 test statistic이 rejection region에 속하는지 판별하기 위해 사용될 수 있다는 것을 살펴보았습니다. 
이러한 $p$-value는 몇 가지 특징을 가지는데요, 살펴보도록 합시다.
<!--more--></p>

<p>아래의 내용은 Daniël Lakens의 「<a href="https://lakens.github.io/statistical_inferences/">Improving Your Statistical Inferences</a>」를 바탕으로 여러 문헌을 공부하며 정리한 내용입니다.</p>

<ul>
  <li>제가 통계학 전공자가 아니라는 점을 기억하시고, 이 글에 통계학적으로 잘못된 서술이 있을 수 있다는 점을 유념하여 비판적으로 읽어주길 바라요. 오류를 발견하면 언제든 이야기해주세요.</li>
  <li>글의 내용을 다른 곳에 인용하실 때에는 이 <strong>글의 출처와 함께 원문의 서지 정보를 필히 밝혀</strong>주세요.</li>
</ul>

<p><strong>Null Statistical Hypothesis Testing</strong> 정리하기 (2/4)</p>

<p><a href="/blog/2024/05/22/p-val-1.html">1장. 통계적 가설검정의 개념</a></p>

<p><a href="/blog/2024/05/23/p-val-2.html">2장. p value의 특징</a> <strong>←</strong></p>

<p><a href="/blog/2024/05/28/p-val-3.html">3장. p-value를 제대로 보고하기</a></p>

<p><a href="/blog/2024/05/29/p-val-4.html">4장. p-value와 error rate에 대한 오해와 물음</a></p>

<h2 id="2-1-p-value-distribution">2-1. P-Value Distribution</h2>
<p>어떤 실험 1회에서 얻은 test 결과는 $p$-value를 포함하고 있습니다. 동일한 실험을 매우 많이, 셀 수 없을만큼 시행하여 얻은 $p$-value는 어떤 값을 가질까요? 실험 하나에서 얻은 $p$-value의 값이 같은 실험을 무한히 많이 시행했을 때에도 비슷하게 유지될까요? $H_0$가 실제로 거짓인 실험을 무한히 많이 시행했을 때 매우 낮은 $p$-value가 많이 나오고, $H_0$가 실제로 참인 실험을 무한히 많이 시행했을 때 높은 $p$-value가 많이 나올까요? 우리는 이를 컴퓨터 시뮬레이션을 통해 알아볼 수 있습니다. 가령 $H_0$가 참인 데이터를 만들어 놓고, 그 데이터를 통해 계산된 $p$-value가 어떤 값을 가지는지 살펴보는 것이죠.</p>

<p>아래에서는 시뮬레이션을 통해 각각의 상황에서 $p$-value가 어떤 분포를 갖는지 알아보겠습니다.</p>

<ol>
  <li>$H_0$가 실제로 거짓인 경우: 낮은 p가 나오는 빈도가 높습니다.</li>
</ol>

<p>시뮬레이션 조건은 다음과 같습니다:</p>
<ul>
  <li>100,000번 반복.</li>
  <li>$H_0:\mu_1 = \mu_2 = 100$, $\sigma_1 = \sigma_2 = 15$, $n_1 = n_2 = 140$</li>
  <li>Student’s $t$-test, power $= 0.80$</li>
</ul>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Adapted from Lakens (2024), section 1.4</span><span class="w">
</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">numeric</span><span class="p">(</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="c1"># store all simulated *p*-values</span><span class="w">

</span><span class="c1"># When H_0 FALSE</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1"># for each simulated experiment</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">140</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">)</span><span class="w"> </span><span class="c1"># </span><span class="w">
  </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">140</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">105</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">)</span><span class="w"> </span><span class="c1"># H_0 FALSE</span><span class="w">
  </span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t.test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">var.equal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="o">$</span><span class="n">p.value</span><span class="w"> </span><span class="c1"># store the *p*-value</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.05</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="c1"># compute power</span><span class="w">

</span><span class="n">hist</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">)</span><span class="w"> </span><span class="c1"># plot a histogram</span><span class="w">
</span></code></pre></div></div>

<p align="left">
  		<img src="/files/img/P_when_H0_FALSE.svg" width="60%" />
	</p>

<p>위 히스토그램을 통해, $H_0$가 실제로 거짓인 경우 낮은 $p$-value가 많이 나온다는 점을 알 수 있습니다.</p>

<ol>
  <li>$H_0$가 실제로 참인 경우: p값이 나오는 빈도가 동일합니다.</li>
</ol>

<p>시뮬레이션 조건은 다음과 같습니다:</p>

<ul>
  <li>100,000번 반복.</li>
  <li>$H_0:\mu_1 = \mu_2 = 100$, $\sigma_1 = \sigma_2 = 15$, $n_1 = n_2 = 140$</li>
  <li>
    <p>Student’s $t$-test, $\alpha = 0.05$</p>

    <p align="left">
		<img src="/files/img/P_when_H0_TRUE.svg" width="60%" />
  </p>
  </li>
</ul>

<p>즉, <strong>$H_0$가 실제로 참일 때는 어떤 p값이든 동일한 확률로 나올 수 있다</strong>는 의미입니다.</p>
<ul>
  <li>$H_0$가 실제로 참일 때 이를 잘못 기각하는 type I error probability는 $\alpha = 0.05$입니다.</li>
  <li>실제로 위 시뮬레이션의 빨간 점선은 $y=5000$을 나타내는 선으로, $100,000$번 중 $5,000$번 즉 전체의 $0.05\%$에서 $p$가 통계적으로 유의하지 않게 나오는 것을 볼 수 있습니다. 다시 말해, $p&lt;0.05$인 경우의 수는 전체의 $0.05\%$ 이하인 것이죠.</li>
  <li>예컨대 $0.04 &lt; p \le 0.05$일 확률은 $0.89 &lt;p \le 0.90$일 확률과 같다는 말이에요!</li>
  <li>Null hypothesis가 참일 때 $p$-value는 uniform distribution을 따른다고 볼 수 있습니다.</li>
  <li>단, 이러한 분포는 Pearson’s $\chi^2$ test나 Fisher’s exact test와 같이 test statistic이 discrete한 경우에는 적용되지 않는 것으로 알려져 있습니다 (Wang et al., 2019; Murdoch et al., 2008).</li>
</ul>

<h2 id="2-2-lindleys-paradox">2-2. Lindley’s Paradox</h2>
<p>$p$-value에 관한 또 다른 성질은 Lindley’s Paradox<sup>린들리의 역설</sup>와 관련이 있습니다. Lindley’s paradox는 Jeffreys’s paradox나 Jeffreys-Lindley paradox라고도 불리기도 합니다. Lindley’s paradox에 대한 기본 설명에 관해서는 Spanos (2013)의 글을, frequentist<sup>빈도주의</sup> test에서 이것이 이해되는 방식에 관해서는 Maier &amp; Lakens (2022)의 글을 주로 참고하여 정리하였습니다.</p>

<p>먼저 Lindley (1957)가 제시한 ‘Large $n$ problem’에서 시작합시다. Mean $\theta \in (-\infty,\infty)$와 알려진 variance $\sigma^2 &gt; 0$를 갖는 independent &amp; identically distributed simple normal model (이하 NIID<sup>Normal Independent Identically Distributed</sup> model) $X_k$, 즉 \(X_k \sim NIID(\theta, \sigma^2), k= 1, 2,\ldots, n, \ldots\)에 대해, large $n$ problem은 다음과 같습니다:</p>

<p class="info"><b>Large $n$ problem</b><br /> Frequentist $\alpha$-significance level test는 어떠한 point null hypothesis (e.g. $H_0:\theta = \theta_0$)라도 기각되도록 하는 충분히 큰 sample size $n$을 항상 가진다는 오류에 취약하다.</p>

<p>Lindley는 large $n$ problem이 Bayesian hypothesis test<sup>베이지안 가설검정</sup>의 결과와 충돌하는 역설적인 상황을 다음과 같이 설명합니다.</p>

<p class="info"><b>Jeffreys-Lindley paradox</b><br /> 어떤 prior에 대해서, $n\rightarrow\infty$이면 ($H_0$에 대한 posterior probability) $\rightarrow 1$이다.<br /> 즉, $n$이 충분히 클 때 frequentist 접근에서 기각되는 $H_0$가 Bayesian 접근에서 기각되지 않을 수 있는 역설적 상황이 벌어지는 것이다.</p>

<p>Frequentist test에서는 $H_0$가 기각되는데 Bayseian test에서는 $H_0$가 기각되지 않는다니…</p>

<p>한편 Jeffreys-Lindley paradox는 frequentist test에서 다음과 같이 이해될 수도 있습니다<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> (Maier &amp; Lakens, 2022):</p>

<p class="info"><b>Jeffreys-Lindley paradox'</b><br /> Power가 증가할수록 효과가 *있을 때*보다 *없을 때*  $p &lt; \alpha = 0.05$인 $p$-value가 나올 가능성이 높아지는 역설적인 현상을 말한다.</p>

<ul>
  <li>Power가 높을 때, 가령 $n$이 클 때에, 대부분의 $p$-value가 $\alpha$ 이하에 집중되며, <strong>작은 $p$-value</strong> (e.g. $p&lt;0.05$)는 효과가 있을 때 보다도 <strong>없을 때 관찰될 가능성이 더 높습니다</strong>.</li>
  <li>$p$-value가 $\alpha$뿐만 아니라 test의 <strong>power</strong>와도 함께 해석되어야 하는 이유일 것 같습니다.</li>
  <li>다음은 제가 작성한 간단한 시뮬레이션 결과를 바탕으로 그린 그래프입니다:</li>
</ul>
<p align="left">
  		<img src="/files/img/p_density.svg" width="80%" />
	</p>

<p>각각 Power가 $50\%$, $80\%$, $99\%$이도록 한 $H_1$이 참인 경우와 $H_0$가 참인 경우, 총 4개 경우에서 Student $t$-test의 결과로 얻은 $p$-value의 분포가 어떻게 다른지 보고자 하였습니다. Sample size는 $d = 0.5$와 각각의 power를 만족하도록 정하였고요. 각 시행을 $100,000$번 반복하여 test를 $100,000$번 진행한 후 얻은 $p$-value의 histogram을 <code class="language-plaintext highlighter-rouge">ggplot2</code> package의 <a href="https://ggplot2.tidyverse.org/reference/geom_density.html" target="_blank"><code class="language-plaintext highlighter-rouge">geom_density()</code></a> 함수를 통해 추정한 density로 나타냈습니다. <code class="language-plaintext highlighter-rouge">geom_density()</code>는 <code class="language-plaintext highlighter-rouge">stat::density()</code>를 사용하는데, <a href="https://rdrr.io/r/stats/density.html" target="_blank"><code class="language-plaintext highlighter-rouge">stat::density()</code></a>는 기본값으로 Gaussian kernel density estimation을 통해 추정합니다. 사용한 코드를 간단히 알아보겠습니다.</p>

<p>먼저 시뮬레이션 결과를 <code class="language-plaintext highlighter-rouge">p_null</code>, <code class="language-plaintext highlighter-rouge">p_99</code>, <code class="language-plaintext highlighter-rouge">p_80</code>, <code class="language-plaintext highlighter-rouge">p_50</code>에 저장하고, 이를 <code class="language-plaintext highlighter-rouge">p_power</code>에 tibble 타입으로 저장합니다.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># alpha = 0.05, H0 TRUE</span><span class="w">
</span><span class="n">p_null</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">numeric</span><span class="p">(</span><span class="m">100000</span><span class="p">)</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1"># for each simulated experiment</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">p_null</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t.test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">var.equal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="o">$</span><span class="n">p.value</span><span class="w"> </span><span class="c1"># store the *p*-value</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">p_null</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.05</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="c1"># compute alpha</span><span class="w">

</span><span class="c1"># d = 0.5, 99% power, H1 TRUE</span><span class="w">
</span><span class="n">p_99</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">numeric</span><span class="p">(</span><span class="m">100000</span><span class="p">)</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1"># for each simulated experiment</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">150</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">150</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">p_99</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t.test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">var.equal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="o">$</span><span class="n">p.value</span><span class="w"> </span><span class="c1"># store the *p*-value</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">p_99</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.05</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="c1"># compute power</span><span class="w">

</span><span class="c1"># d = 0.5, 80% power, H1 TRUE</span><span class="w">
</span><span class="n">p_80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">numeric</span><span class="p">(</span><span class="m">100000</span><span class="p">)</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1"># for each simulated experiment</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">64</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">64</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">p_80</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t.test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">var.equal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="o">$</span><span class="n">p.value</span><span class="w"> </span><span class="c1"># store the *p*-value</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">p_80</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.05</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="c1"># compute power</span><span class="w">

</span><span class="c1"># d = 0.5, 50% power, H1 TRUE</span><span class="w">
</span><span class="n">p_50</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">numeric</span><span class="p">(</span><span class="m">100000</span><span class="p">)</span><span class="w">
</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1"># for each simulated experiment</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1"># Simulate data</span><span class="w">
  </span><span class="n">p_50</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">t.test</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">var.equal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="o">$</span><span class="n">p.value</span><span class="w"> </span><span class="c1"># store the *p*-value</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">p_50</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.05</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">100000</span><span class="p">)</span><span class="w"> </span><span class="c1"># compute power</span><span class="w">

</span><span class="n">p_power</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="p">(</span><span class="n">p_null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_null</span><span class="p">,</span><span class="w"> </span><span class="n">p_50</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_50</span><span class="p">,</span><span class="w"> </span><span class="n">p_80</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_80</span><span class="p">,</span><span class="w">
                  </span><span class="n">p_99</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_99</span><span class="p">,</span><span class="w"> </span><span class="n">blank</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">numeric</span><span class="p">(</span><span class="m">100000</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>이후 결과를 <code class="language-plaintext highlighter-rouge">ggplot2</code> 패키지를 통해 그립니다.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cols</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">p_99</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">p_80</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"purple"</span><span class="p">,</span><span class="w"> </span><span class="n">p_50</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"skyblue"</span><span class="p">,</span><span class="n">p_null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">)</span><span class="w">
</span><span class="n">p_density</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">p_power</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_density</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_99</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"p_99"</span><span class="p">),</span><span class="w"> </span><span class="n">linewidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">bw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bw_99</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_density</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_80</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"p_80"</span><span class="p">),</span><span class="w"> </span><span class="n">linewidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">bw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bw_80</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_density</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_50</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"p_50"</span><span class="p">),</span><span class="w"> </span><span class="n">linewidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">bw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bw_50</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_density</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p_null</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"p_null"</span><span class="p">),</span><span class="w"> </span><span class="n">linewidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="n">bw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bw_null</span><span class="p">,</span><span class="w">
               </span><span class="n">linetype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dashed"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
</span><span class="n">...</span><span class="w">
</span></code></pre></div></div>

<p>이때 <code class="language-plaintext highlighter-rouge">geom_density()</code>의 <code class="language-plaintext highlighter-rouge">bw</code> 파라미터는 bandwidth를 의미하는데, bandwidth는 Scott의 방법</p>

\[\text{bandwidth} = h \approx 1.06 \times s\cdot n^{-1/5}\text{ where n is sample size and s is sample standard deviation.}\]

<p>으로 정하였습니다<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Bandwidth parameter in Gaussian KDE: Scott's bandwidth</span><span class="w">
</span><span class="n">bw_50</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1.06</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">p_50</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">p_50</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="m">-0.2</span><span class="p">)</span><span class="w">
</span><span class="n">bw_80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1.06</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">p_80</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">p_80</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="m">-0.2</span><span class="p">)</span><span class="w">
</span><span class="n">bw_99</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1.06</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">p_99</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">p_99</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="m">-0.2</span><span class="p">)</span><span class="w">
</span><span class="n">bw_null</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1.06</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">p_null</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="n">p_null</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="m">-0.2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="결론">결론</h2>
<p>Long-term 시뮬레이션을 통해 $p$-value가 지니는 두 가지 특성을 알아보았습니다.</p>
<ul>
  <li>$H_0$가 실제로 거짓일 때는 낮은 $p$-value가 더 많이 나오지만, $H_0$가 실제로 참일 때에는 $p$-value가 어떤 값이든 비슷한 확률로 나올 수 있습니다.</li>
  <li>Power가 매우 클 때, $H_0$가 참일 때보다 $H_0$가 거짓일 때 작은 $p$가 나올 가능성이 높아질 수 있습니다.</li>
</ul>

<h2 id="reference">Reference</h2>
<ul>
  <li>Lindley, D. V. (1957). A Statistical Paradox. <em>Biometrika, 44</em>(1/2), 187-192. https://doi.org/10.2307/2333251</li>
  <li>Maier, M., &amp; Lakens, D. (2022). Justify Your Alpha: A Primer on Two Practical Approaches. <em>Advances in Methods and Practices in Psychological Science, 5</em>(2), 25152459221080396. <a href="https://doi.org/10.1177/25152459221080396" target="_blank">https://doi.org/10.1177/25152459221080396</a></li>
  <li>Murdoch, D. J., Tsai, Y.-L., &amp; Adcock, J. (2008). P-Values are Random Variables. <em>The American Statistician, 62</em>(3), 242-245. <a href="https://doi.org/10.1198/000313008X332421" target="_blank">https://doi.org/10.1198/000313008X332421</a></li>
  <li>Spanos, A. (2013). Who Should Be Afraid of the Jeffreys-Lindley Paradox? Philosophy of Science, 80(1), 73-93. <a href="https://doi.org/10.1086/668875" target="_blank">https://doi.org/10.1086/668875</a></li>
  <li>Wagenmakers, E.-J., &amp; Ly, A. (2023). History and nature of the Jeffreys–Lindley paradox. <em>Archive for History of Exact Sciences, 77</em>(1), 25-72. <a href="https://doi.org/10.1007/s00407-022-00298-3" target="_blank">https://doi.org/10.1007/s00407-022-00298-3</a></li>
  <li>Wang, B., Zhou, Z., Wang, H., M. Tu, X., &amp; Feng, C. (2019). The p-value and model specification in statistics. <em>General Psychiatry, 32</em>(3), e100081. <a href="https://doi.org/10.1136/gpsych-2019-100081" target="_blank">https://doi.org/10.1136/gpsych-2019-100081</a></li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>사실 Jeffreys-Lindley paradox가 frequentist test에서 어떻게 이와 같이 이해될 수 있는지는 잘 모르겠습니다. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>Distribution이 한눈에 보아도 highly skewed되어 있는데, 여기에 Gaussian KDE를 사용하는 것이 맞는지, 또는 bandwidth를 결정할 때 Scott의 방법을 사용하는 것이 맞는지 잘 모르겠습니다. 하지만 Gaussian KDE에 Scott의 bandwidth를 사용하였을 때, 눈으로 보기에 density가 histogram의 추세를 잘 따르는 것 같아 사용하였습니다. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Tope</name></author><category term="blog" /><category term="statistics" /><summary type="html"><![CDATA[머리말 앞 장에서 Neyman-Pearson test에서 $p$-value 개념이 핵심적이지는 않지만, 적어도 test statistic이 rejection region에 속하는지 판별하기 위해 사용될 수 있다는 것을 살펴보았습니다. 이러한 $p$-value는 몇 가지 특징을 가지는데요, 살펴보도록 합시다.]]></summary></entry><entry xml:lang="ko"><title type="html">[NHST] 1장. 통계적 가설검정의 개념</title><link href="http://localhost:4000/blog/2024/05/22/p-val-1.html" rel="alternate" type="text/html" title="[NHST] 1장. 통계적 가설검정의 개념" /><published>2024-05-22T00:00:00+09:00</published><updated>2024-05-22T00:00:00+09:00</updated><id>http://localhost:4000/blog/2024/05/22/p-val-1</id><content type="html" xml:base="http://localhost:4000/blog/2024/05/22/p-val-1.html"><![CDATA[<h2 id="머리말">머리말</h2>
<p>널리 사용되는 null hypothesis statistical testing<sup>영가설 통계 검정</sup>은 학부 1학년 수준 통계학에서 배울 정도로 널리 사용되는 가설 검정법이에요. 이는 Fisher의 test of significance와 Neyman-Pearson의 statistical hypothesis testing의 여러 요소가 뒤섞여 사용되고 있는데, 한번 자세히 알아봅시다.
<!--more--></p>

<p>일반적으로 NHST는 null hypothesis<sup>영가설</sup> ($H_0$)과 alternative hypothesis<sup>대립가설</sup> ($H_1$)을 세우고, 실험을 통해 얻은 observed test statistics<sup>관측 검정통계량</sup>을 통해 $p$-value를 계산합니다. 계산된 $p$-value를 type I error rate<sup>1종 오류율</sup>인 significance level<sup>유의수준</sup>과 비교하여 $H_0$를 기각하거나 수용합니다.</p>

<p>하지만 NHST를 공부하다 보면, 이해가 되지 않거나 헷갈리기 쉬운 지점들이 있습니다. $p$-value는 type I error를 저지를 확률인가요? 만약 type I error rate이 아니라면 어째서 maximum type I error rate인 $\alpha$와 비교하나요? $p$-value는 영가설<sup>null hypothesis</sup>($H_0$)이 참일 확률인가요? $\alpha$는 $0.05$, $\beta$는 $0.8$로 하는 이유가 있나요? 등등. 이 같은 물음에 답하기 위해서는 NHST가 하늘에서 뚝 떨어진 통계방법론이 아니라는 점에 주목할 필요가 있습니다. NHST는 Ronald Fisher가 제시한 test of significance<sup>유의성 검정</sup>, 그리고 Jerzy Neyman과 Egon Pearson이 제시한 statistical hypthesis testing<sup>통계적 가설검정</sup>의 요소들이 섞여있는 test입니다. 그래서 각각의 test가 무엇이고 어떻게 다른지 알아보는 것이 중요할 것 같습니다. 바로 1장에서 다루는 내용입니다.</p>

<p>한편 NHST에 대한 비판도 상당한 듯한데, 관습적으로 많은 저널과 기관에서 사용하고 있으니 따르지 않을 수 없겠습니다. 이왕 사용한다면 정확하게 아는 게 낫겠죠? 1장부터 4장까지 저의 서술은 주로 Daniël Lakens의 「<a href="https://lakens.github.io/statistical_inferences/">Improving Your Statistical Inferences</a>」를 바탕으로 정리한 것입니다. 특히 1장은 두 test의 개념과 차이 등을 살펴보고자 Aris Spanos의 「Probability Theory and Statistical Inference」를 중심으로 정리하였습니다. 참고한 문헌들도 여럿 있고요.</p>

<p>처음 용어를 제시할 때는 영어 용어와 한국어 용어를 병기하였고, 이후로는 영어 용어를 사용하였음을 양해해주세요.</p>

<ul>
  <li>제가 통계학 전공자가 아니라는 점을 기억하시고, 이 글에 통계학적으로 잘못된 서술이 있을 수 있다는 점을 유념하여 비판적으로 읽어주길 바라요. 오류를 발견하면 언제든 이야기해주세요.</li>
  <li>글의 내용을 다른 곳에 인용하실 때에는 이 <strong>글의 출처와 함께 원문의 서지 정보를 필히 밝혀</strong>주세요.  특히 <strong>1-1, 1-2, 1-3절</strong>의 내용을 인용할 때는 <strong>Spanos (2003)의 서지정보를 명시</strong>하도록 하고, 기타 <strong>in-text citation이 명시된 항목</strong>의 경우에도 <strong>해당 서지정보를 함께 밝혀</strong>주길 바랍니다. 연구, 아이디어, 주장 등은 한 사람이 뚝딱 생각하여 만드는 것이 아니라 선행 문헌들 위에서 발전되어 온 것들입니다 (a.k.a. 거인의 어깨). 원 문헌을 저술한 저자를 명시하여 그들이 받아 마땅한 공을 밝히도록 합시다.</li>
</ul>

<p><strong>Null Statistical Hypothesis Testing</strong> 정리하기 (1/4)</p>

<p><a href="/blog/2024/05/22/p-val-1.html">1장. 통계적 가설검정의 개념</a> <strong>←</strong></p>

<p><a href="/blog/2024/05/23/p-val-2.html">2장. p-value의 특징</a></p>

<p><a href="/blog/2024/05/28/p-val-3.html">3장. p-value를 제대로 보고하기</a></p>

<p><a href="/blog/2024/05/29/p-val-4.html">4장. p-value와 error rate에 대한 오해와 물음</a></p>

<h2 id="1-1-fishers-test-of-significance">1-1. Fisher’s Test of Significance</h2>
<p>Fisher의 test of significance<sup>유의성 검정</sup>은 Neyman-Pearson의 statistical hypothesis testing<sup>통계적 가설검정</sup>보다 먼저 나온 방법입니다. Neyman과 Pearson이 Fisher의 방법을 보완하고자 제시한 것이 statistical hypothesis testing이기 때문이죠. 먼저 Fisher의 방법을 살펴본 이후 Neyman-Pearson의 방법을 알아보겠습니다.</p>

<h3 id="개념과-과정">개념과 과정</h3>

<p>Ronald Fisher가 제시한 test of significance<sup>유의성 검정</sup>는 다음과 같이 진행됩니다<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.</p>

<ol>
  <li>
    <p><strong>Null hypothesis<sup>영가설</sup> $\mathbf{H_0}$를 정합니다</strong>. 이때 $H_0: \theta = \theta_0$의 형태로 나타낼 수 있습니다.</p>

    <ul>
      <li>$H_0$는 효과가 없다고(null) 가정했을 때의 가설을 말합니다. 그래서 <em>null</em> hypothesis이죠.</li>
      <li>그렇다고 $H_0$가 반드시 효과가 없다는 가설일 필요는 없습니다. $H_0: \mu_1 - \mu_2 = 0$과 같이 효과가 없는 경우일 수도 있지만, $H_0: \mu_1 - \mu_2 = 6$이나 $r = 0.4$와 같이 특정한 값을 갖는 경우도 $H_0$가 될 수 있습니다. Null hypothesis가 <em>효과없음</em>을 의미하는 가설만을 칭한다고 오해되기 쉬워서, <strong>target hypothesis</strong>와 같이 더 포괄적인 용어를 사용해야 한다고 보는 경우도 있습니다 (Greenland, 2023).</li>
      <li>보다 중요한 것은 <strong>$\mathbf{H_0}$가 sampling distribution<sup>표본 분포</sup>에 관한 정보를 담고 있어야</strong> 한다는 점입니다. 다시 말해 $H_0$는 test statistic<sup>검정 통계량</sup> $\tau(\mathbf{X})$의 sampling distribution을 특정할 수 있는 조건을 기술합니다. 왜 그래야 할까요? 바로 test of significance의 근간이 되는 원리: $H_0$가 참이라는 전제 하에 정해진 sampling distribution에서 우리가 관찰하여 얻은 test statistic이 어디쯤 위치하는지 알기 위함입니다. 이를 통해 $H_0$가 참일 때 관측된 statistic이 얼마나 드문지 알 수 있는 것이지요.</li>
    </ul>
  </li>
  <li>
    <p>목적에 맞는 <strong>test statistics를 정합니다</strong>.</p>

    <ul>
      <li>이때 <em>test statistic</em> $\tau(\mathbf{X})$는 $H_0:\theta = \theta_0$가 맞다는 가정 하에 그 distribution이 알려져 있어야 합니다. 앞서 강조했듯, 우리가 관찰하여 얻은 test statistic이 해당 sampling distribution에서 얼마나 드문지 알기 위함입니다.</li>
    </ul>
  </li>
  <li>
    <p><strong>$\textbf{p}$-value를 계산합니다</strong>. 이때 $p$-value는 statistic $\tau(\mathbf{X})$의 관측값인 $\tau(\mathbf{x})$의 tail-area probability로 계산된다.</p>

    <ul>
      <li>즉 $p\text{-value} = P(\tau(\mathbf{X}) \ge \tau(\mathbf{x})\mid H_0)$ 로서, sampling distribution에서 test statistic의 관측값과 그 이상의 극단적인 값이 관측될 확률을 의미합니다.</li>
    </ul>
  </li>
  <li>
    <p><strong>$\mathbf{p}$-value를 해석한다</strong>.</p>

    <ul>
      <li>$H_0$가 참이라고 가정된 distribution (null model)에서, $p$-value가 작다면 (1) test statistic이 관측된 상황이 매우 드문 event이거나, (2) 가설로 상정된 $H_0$가 타당하지 않은 가설이거나의<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">2</a></sup> 두 경우로 해석될 수 있습니다<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">3</a></sup>.</li>
      <li>현실적으로 연구자는 (1)보다는 (2)의 해석을 택하여 <strong>$p$-value를 null hypothesis가 믿을만한지에 관한 척도로</strong> 사용할 수 있습니다. $p$-value는 작으면 작을수록 $\tau(\mathbf{x})$가 $H_0$ 하에서 관측될 법하지 않기 때문에, $H_0$를 믿지 않을 이유가 더 커지는 것으로 이해됩니다.</li>
      <li>Fisher의 방법을 통해 알 수 있는 것은 <strong>$H_0$ 하에서 연구 결과가 나타날 확률</strong>입니다. 그러므로 Fisher의 $p$-value는 $H_0$를 잘못된 것으로 <em>기각</em>하거나 $H_0$에 반대되는 가설을 <em>지지</em>하는 <strong>의사결정에 관한 방법이 아닙니다</strong>.</li>
      <li>
        <p>어떤 $p$-value가 작은 값인지 아닌지에 관해서 Fisher는 초기 저작과 후기 저작에서 의견을 달리합니다.</p>

        <ul>
          <li>초기에 Fisher는 significance level을 관습적으로 5%로 제시하며 유의하지 않은 결과는 무시되어야한다고 봅니다 (Fisher, 1935, p.13, 재인용:Gigerenzer et al., 2004).</li>
          <li><strong>Fisher는 이후</strong> $p$-value가 얼마나 작아야하는가에 관해서는 <strong>연구마다, 연구자마다 다를 수 있다</strong>고 하며 $p$-value의 값을 <strong>그대로 보고하여</strong> 동료 연구자와 공유해야한다고 봅니다 (Fisher, 1956, p. 42, 재인용: Gigerenzer et al., 2004).</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="목적">목적</h3>
<p>Fisher’s test of significance를 통해 얻은 $p$-value는 <strong>observed statistic과 그 이상의 극단값이 null model 하에서 나올 확률</strong>로서, 검정하고자 하는 <strong>null hypothesis가 얼마나 믿을만한지에 대한 정립된 척도</strong>를 제공합니다 (Fisher, 1956, p. 44). $p$-value는 작으면 작을수록 $\tau(\mathbf{x})$가 $H_0$ 하에서 관측될 법하지 않기 때문에 $H_0$를 받아들이지 않을 이유가 더 커지는 것으로 이해되는 것이지요.</p>

<h2 id="1-2-neyman-pearsons-statistical-hypothesis-testing">1-2. Neyman-Pearson’s Statistical Hypothesis Testing</h2>

<p>Jerzy Neyman과 Egon Pearson<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup>은 $p$-value에 대한 Gosset과 Fisher의 연구를 바탕으로 <strong>statistical hypothesis testing</strong>이라는 방법을 개발합니다. Fisher의 test of significance와는 달리 alternative hypothesis<sup>대립가설</sup>($H_a$; $H_1$)이 설정되고, 연구자는 잠정적으로 $H_0$와 $H_1$ 두 가설 중 하나가 참인 것처럼 받아들이게 됩니다.</p>

<h3 id="개념과-과정-1">개념과 과정</h3>

<p>Neyman–Pearson의 statistical hypothesis testing은 다음과 같이 진행됩니다 (Spanos, 2003, 14.3절).</p>

<ol>
  <li>
    <p><strong>Null hypothesis $H_0$와 alternative hypothesis $H_1$를 정합니다</strong>.</p>

    <ul>
      <li>각각 $H_0: \theta = \theta_0$ 와 $H_1: \theta \ne \theta_0$로 표현됩니다.</li>
      <li>
        <p>이때 parameter space<sup>모수 공간</sup> $\Theta$는 mutually exclusive한<sup>상호배타적인</sup> 두 부분집합으로 분할됩니다:</p>

\[\Theta_0 := \{\theta_0\}\text{ and }\Theta_1 := \Theta -\{\theta_0\},\quad \text{where } \Theta_0\cap\Theta_1 = \varnothing, \Theta_0\cup \Theta_1 = \Theta\]
      </li>
      <li>
        <p>더 일반적인 Neyman-Pearson hypothesis의 형태는 다음과 같습니다:</p>

\[H_0: \theta \in \Theta_0 \text{ against }H_1: \theta \in \Theta_1:=\Theta -\Theta_0\]
      </li>
      <li>
        <p>이는 사실상 postulated probability model $\Phi = {f(x;\theta), \theta\in\Theta, x\in \mathbb{R}_X}$을 양분하는 것입니다:</p>

\[\Phi_0 = \{f(x;\theta), \theta\in\Theta_0, x\in \mathbb{R}_X\}, \Phi_1 = \{f(x;\theta), \theta\in\Theta_1, x\in \mathbb{R}_X\}\]

        <p>$H_0$와 $H_1$이 궁극적으로는 parameter에 관한 가설이라기보다 <em>distribution</em>에 관한 가설이라는 점을 알 수 있겠습니다.</p>

\[H_0:f(x)\in \Phi_0\text{ against }H_1:f(x)\in\Phi_1\]
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Rejection region</strong>을 정합니다.</p>

    <ul>
      <li>Neyman–Pearson test의 주된 목적은 $H_0$를 <strong>수용하거나 기각하기 위한 결정 규칙</strong> (decision rule)을 만드는 것입니다. 이 결정은 test statistic $\tau(\mathbf{X})$를 기준으로 하므로, $\tau(\mathbf{X})$는 sample space $\mathcal{C}$를 두 집합 $C_0$와 $C_1$로 분할하게 됩니다.</li>
      <li>$C_0:=\lbrace\mathbf{x}:\tau(\mathbf{x}) \le c_\alpha\rbrace$로 표현되어 acceptance region<sup>수용역</sup>이라 불리고, $C_1:=\lbrace\mathbf{x}:\tau(\mathbf{x}) &gt; c_\alpha\rbrace$로 표현되어 rejection region<sup>기각역</sup>이라 불립니다.</li>
      <li>각각 	$C_0 \cup C_1 = \mathcal{C}$ and $C_0 \cap C_1 = \varnothing$ 을 만족하는 것을 알 수 있겠습니다.</li>
      <li>
        <p>$H_0$를 수용할지 기각할지에 관한 결정은 두 region의 측면에서 정해집니다:</p>

\[\text{(i) if } \mathbf{x}\in C_0:\text{accept }H_0,\quad \text{(ii) if } \mathbf{x}\in C_1:\text{reject } H_0\]
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Type I error와 type Ⅱ error</strong></p>

    <ol>
      <li>두 종류의 error가 있습니다.
        <ul>
          <li><strong>type I error</strong><sup>1종 오류</sup>: Null hypothesis가 타당한데<sup>valid</sup> 이를 기각하는 오류</li>
          <li><strong>type Ⅱ error</strong><sup>2종 오류</sup>: Null hypothesis가 타당하지 않은데<sup>not valid</sup> 이를 수용하는 오류</li>
        </ul>
      </li>
      <li>
        <p><strong>Probability of type I error</strong></p>

        <p>$\theta_0 = \theta$ 일 때 type I error를 저지를 확률은 다음의 일반적인 형태로 표현될 수 있습니다:</p>

\[P(\mathbf{x} \in C_1; \theta = \theta_0) = \alpha\]

        <ul>
          <li>$\alpha$는 long-run type I error로서, 연구자가 최대로 허용할 수 있는 type I error probability를 의미합니다<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup>.</li>
          <li>Rejection region이 넓을 수록 $\alpha$는 줄어들지만, 이는 type II error의 확률을 증가시키게 됩니다.</li>
        </ul>
      </li>
      <li>
        <p><strong>Probability of type Ⅱ error</strong></p>

        <p>$\theta = \theta_1$일 때 type II error를 저지를 확률은 다음의 일반적인 형태로 표현될 수 있습니다:</p>

\[P(\mathbf{x}\in C_0; \theta = \theta_1) = \beta(\theta_1)\]

        <ul>
          <li>이때 test statistic의 distribution을 알아야 확률을 계산할 수 있는데, $\Theta_1:=\Theta -\Theta_0$  의 값을 특정해야 distribution을 알 수 있겠죠? 그래서 위의 식에서 $\beta(\theta_1)$은 $\beta$가 $\theta_1$에 따라 정해진다는 의미입니다.</li>
          <li>$\alpha$와는 달리, $\beta$는 rejection region이 넓을 수록 증가합니다.</li>
          <li>$\alpha$가 커지면 $\beta$가 줄어들고, $\beta$가 커지면 $\alpha$가 줄어다는 사실을 제가 만든 다음 그림으로 이해할 수 있겠습니다.</li>
        </ul>

        <p align="left">
  			<img src="/files/img/alpha_beta.svg" width="60%" />
 </p>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>최적의 test를 정합니다</strong></p>

    <ol>
      <li>Neyman–Pearson은 $H_0$를 $H_1$보다 더 중요하게 다룹니다. 즉 낮은 $\alpha$를 먼저 정하고, 이후에 $\beta$를 최소화하는 방향으로 test를 선택한다는 것이죠. 가령 연구자는 $\alpha  = 0.01$로 정해두고 이후 $\beta$를 최소화하는 test를 선택하게 됩니다.</li>
      <li>일반화하면 다음과 같습니다. $|\tau(\mathbf{X})| &gt; c_\alpha$일 때 $H_0$를 기각한다면,  $\tau(\mathbf{X})$는 다음을 만족하도록 선택한다:		
 \(\begin{align}&amp;\text{(a)}\quad P(|\tau(\mathbf{X})| &gt; c_\alpha; H_0\text{ valid}) = \alpha\\
     &amp;\text{(b)}\quad P(|\tau(\mathbf{X})| \le c_\alpha; H_1(\theta)\text{ valid}) = \beta (\theta)\text{ for }\theta \in \Theta_1 \text{ is minimized.}
     \end{align}\)</li>
      <li>
        <p>이는 test의 power<sup>검정력</sup>를 고려하는 측면에서 이해될 수도 있습니다.</p>

        <ul>
          <li>
            <p><strong>Power of a test</strong><sup>검정력</sup>: 타당하지 않은 $H_0$를 기각할 확률로서, 어떤 값 $\theta_1 \in \Theta_1$에 대해 다음과 같이 쓸 수 있습니다:</p>

\[P(\theta_1) = P(\mathbf{x}\in C_1;H_1\text{ valid})\]
          </li>
        </ul>

        <p>($H_1: \theta \ne \theta_0$에 대해 $\theta$가 가질 수 있는 값이 여럿이므로 $\theta_1$의 함수로 표현한 것입니다.)</p>

        <ul>
          <li>다시 말해, test의 power는 $H_1$이 타당할 때 $H_0$를 기각할 확률, 또는 family $\Phi_1 = {f(x;\theta), \theta \in \Theta_1, x\in \mathbb{R}_X}$에 실제 분포가 속할 확률을 의미합니다.</li>
          <li>
            <p>전체 parameter space $\Theta$에서 정의한 <strong>power function</strong>은 다음과 같습니다:</p>

\[P_{n}(\theta) = P(\mathbf{x}\in C_1)\text{ for }\theta \in \Theta\]
          </li>
          <li>
            <p>가설 $H_0: \theta = \theta_0$에 대해 significance level은 power function을 통해 정의될 수 있습니다:
  \(P_n(\theta_0) = \alpha\)</p>
          </li>
          <li>
            <p>만약 $\theta_0 \in \Theta_0$이고 $\Theta_0$가 한 개 이상의 원소를 가진다면, test의 <strong>size</strong>를 다음과 같이 정의합니다:</p>

\[\text{size of the test} =\alpha = \max_{\theta\in\Theta_0}P_n(\theta)\]
          </li>
        </ul>

        <p>그러므로 test의 size $\alpha$는 $\Theta_0$의 임의의 원소 $\theta_0$에 대해 $H_0$를 잘못 기각할 최대 확률을 의미합니다.</p>
        <ul>
          <li>가장 적절한 test는 $\alpha$가 정해진 이후, 모든 $\theta \in \Theta_1$에 대해 power를 최대로 하는 test입니다.</li>
        </ul>
      </li>
      <li>
        <p>Test statistic $\tau(\mathbf{X})$를 선택했다면 $H_0$ 하에서의 distribution을 통해 $\lvert\tau(\mathbf{X})\rvert$가 “0으로부터 유의하게 차이나”도록<sup id="fnref:6" role="doc-noteref"><a href="#fn:6" class="footnote" rel="footnote">6</a></sup> 하는 $c_\alpha$를 얻을 수 있습니다. 다음 식을 만족하는 $c_\alpha$를 구하는 것입니다:</p>

\[P(|\tau(\mathbf{X})| &gt; c_\alpha;H_0\text{ valid}) = \alpha\]

        <p>이런 이유로 $\alpha$는 <strong>significance level</strong><sup>유의 수준</sup>이라고도 불립니다.</p>
      </li>
      <li>e.g. $\sigma^2$를 모르는 상황에서 $H_0: \mu = \mu_0$와 $H_1: \mu \ne \mu_0$를 test하고자 하는 상황을 가정해봅시다 (Two-sided test).
        <ul>
          <li>Test statistic은 $\tau(\mathbf{X}):=\frac{\hat{\mu_n} - \mu_0}{s/\sqrt{n}} \sim St(n-1)$</li>
          <li>Rejection region은 $C_1 = \lbrace\mathbf{x}: \lvert\tau(\mathbf{x})\rvert &gt; c_\alpha \rbrace$</li>
          <li>$c_\alpha$는 $\int_{c_\alpha}^\infty \phi(z)dz = \frac{1}{2}\alpha$ where $\phi(z)$ is Student’s $t$ density (pdf).</li>
        </ul>
      </li>
    </ol>
  </li>
  <li>
    <p><strong>$H_0$와 $H_1$중 하나를 택합니다</strong></p>
    <ul>
      <li>Acceptance region $C_0:=\lbrace\mathbf{x}:\tau(\mathbf{x}) \le c_\alpha\rbrace$ 에 대해 $\mathbf{x} \in C_0$일 때 $H_0$를 수용하고<sup id="fnref:7" role="doc-noteref"><a href="#fn:7" class="footnote" rel="footnote">7</a></sup>, rejection region $C_1:=\lbrace\mathbf{x}:\tau(\mathbf{x}) &gt; c_\alpha\rbrace$에 대해 $\mathbf{x}\in C_1$일 때 $H_0$를 기각합니다.</li>
      <li>Neyman–Pearson의 test에서 $p$-value 자체를 사용하지는 않으나, 사실상 test statistic $\tau(\mathbf{x})$가  acceptance region 혹은 rejection region에 포함되는지는 $p$-value와 $\alpha$를 비교하여도 알 수 있습니다. 그러므로  $p &lt; \alpha$일 때 $H_0$를 기각하고, $p \ge \alpha$일 때 $H_0$를 수용합니다. 단, $p$-value를 소위 ‘observed type I error rate’ 등으로 이해하는 것은 잘못되었는데, 이에 관한 내용은 4장에서 다룰 것입니다.</li>
    </ul>
  </li>
</ol>

<h3 id="목적-1">목적</h3>
<p>Neyman과 Pearson은 Fisher의 significance test를 다음 두 가지 이유에서 비판합니다 (Spanos, 2003).</p>
<ul>
  <li>Fisher는 test statistic을 선택하는 기준을 제공하지 않는다. 각각의 $H_0$에 대해 여러 test statistic을 사용할 수 있는데, Fisher는 어떤 것이 가장 적절한 test statistic인지에 관한 방법을 설명하지 않는다.</li>
  <li>$p$-value를 $H_0$에 대한 믿음의 척도 (measure of credence)로 사용하는 것은 논리적 근거가 없다.</li>
</ul>

<p>이에 대한 해결책으로 Neyman과 Pearson은 <strong>hypothesis testing을 경쟁하는 가설 중 하나를 선택하는 것</strong>으로 봅니다<sup id="fnref:8" role="doc-noteref"><a href="#fn:8" class="footnote" rel="footnote">8</a></sup>.</p>

<h2 id="1-3--neymanpearson과-fisher의-차이">1-3.  Neyman–Pearson과 Fisher의 차이</h2>
<ol>
  <li>Test의 <strong>목적</strong>이 다릅니다. 그래서 $\alpha$와 $p$-value는 그 성격이 다르지요. (Spanos, 2003, 14.5.1절)
    <ul>
      <li>Neyman–Pearson의 $\alpha$는 <strong>의사결정(decision-making)이라는 행동</strong>의 규칙이 되는 기준값입니다. 이때 $\alpha$는 significance level로서, test statistic이 $\alpha$보다 큰지 작은지에 따라 $H_0$를 수용하거나 기각하는 의사결정을 내리게 됩니다<sup id="fnref:9" role="doc-noteref"><a href="#fn:9" class="footnote" rel="footnote">9</a></sup>.</li>
      <li>반면 Fisher의 $p$-value는 결정을 내리기 위한 기준이 아니라 sample data가 $H_0$를 얼마나 믿을만한 것으로 만드는지 <strong>추정하기(inferential) 위한 척도</strong>일뿐입니다. 그러므로  Fisher는 $p$-value를 통해 그 이상의 주장을 할 수 없다고 봅니다.</li>
    </ul>
  </li>
  <li>Test의 <strong>범위</strong>가 다릅니다 (Spanos, 2003, 14.5.2절).
    <ul>
      <li>
        <p>Neyman–Pearson의 가설은 $H_0: \theta \in \Theta_0 \text{ against }H_1: \theta \in \Theta_1:=\Theta -\Theta_0$ 의 형태를 가지지요? 그래서 parameter space $\Theta$가 $\Theta_0$와 $\Theta_1$으로 분할되며 probability model $\Phi = {f(x;\theta), \theta \in \Theta, x \in \mathbb{R}_X}$는 $\Phi_0 = {f(x;\theta), \theta\in\Theta_0, x\in \mathbb{R}_X}$와 $\Phi_1 = {f(x;\theta), \theta\in\Theta_1, x\in \mathbb{R}_X}$로 분할되는 것입니다. 이제 Neyman–Pearson의 가설은 다음과 같이 이해될 수 있습니다:</p>

\[H_0:f(x)\in \Phi_0\text{ against }H_1:f(x)\in\Phi_1\]
      </li>
      <li>
        <p>반면 Fisher의 가설은 다음과 같이 이해됩니다:</p>

        <p>\(H_0: f(x)\in \Phi_0\text{ against } H_1: f(x)\in [\mathcal{P}-\Phi_0]\)
  이때 $\mathcal{P}$는 <em>모든</em>  가능한 statistical model의 집합입니다. Fisher는 alternative hypothesis 개념을 거부하긴 했지만, 그의 test에 implicit<sup>암묵적인</sup> alternative hypothesis가 있다는 사실을 부정하기는 어려울 것입니다<sup id="fnref:10" role="doc-noteref"><a href="#fn:10" class="footnote" rel="footnote">10</a></sup>.</p>
      </li>
      <li>
        <p>Fisher의 implicit alternative hypothesis는 N–P test의 alternative hypothesis보다 범위가 넓습니다.</p>
        <ul>
          <li>
            <p>이는 강점이 될 수 있습니다. 연구자는 ‘참인’ statistical model이 null hypothesis와 (implicit) alternative hypothesis의 합집합 안에 존재한다고 확신할 수 있기 때문입니다:</p>

\[f(x) \in \mathcal{P} = \Phi_0 \cup [\mathcal{P}-\Phi_0]\]

            <p>반면 N–P test에서는 ‘참인’ statistical model이 null과 alternative 어디에도 존재하지 않을 수 있다는 점에서 그런 확신을 할 수 없습니다.</p>
          </li>
          <li>
            <p>이는 약점이 될 수도 있겠습니다.  집합 $[\mathcal{P-\Phi_0}]$는 달리 규정된 바가 없는 모든 가능한 모델의 집합이기 때문에 그만큼 다루기<sup>operationalize</sup> 어려울 수 있습니다. 반면 Neyman–Pearson의 $\Phi_1$은 power function의 측면에서 비교적 다루기<sup>operationalize</sup> 쉬울 수 있습니다<sup id="fnref:11" role="doc-noteref"><a href="#fn:11" class="footnote" rel="footnote">11</a></sup>.</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Significance level</strong>을 바라보는 관점이 다릅니다.
    <ul>
      <li>Neyman과 Pearson은 임의의 특정한 시행에서 error가 발생했는지 알 수 없으므로 <strong>long-run probability</strong>에 초점을 두어야 한다고 봅니다 (Perezgonzalez. 2015). 여기서 long-run probability란 특정한 statistical experiment를 셀 수 없이 많이 반복하여 계산된 확률, 즉  <strong>relative frequency (상대빈도)</strong> 로서의 확률을 의미합니다 (Spanos, 2003, p. 698).
        <ul>
          <li>그러므로 type I error rate ($\alpha$)이 $0.05$라는 말은, statistical experiment를 매우 많이 반복 시행하여 수행한 test 결과의 $5\%$가 type I error라는 의미입니다. 가령 $10,000$번의 동일한 시행으로 sample을 얻었다고 하죠. $\alpha = 0.05$는 각각의 시행에 대한 $10,000$개의 검정 결과 중 $500$번의 검정 결과에서 type I error가 발생할 수 있다는 의미인 것입니다</li>
          <li>$\alpha$는 사전에 (<em>a priori</em>) 설정되어야 합니다.</li>
        </ul>
      </li>
      <li>이와 달리 Fisher의 접근은 <strong>특정한 가설의 특정 연구 결과를 검정하고자</strong> 하는 것이므로 long-run probability를 중요하게 보지 않습니다.
        <ul>
          <li>Fisher는 관습적으로 사용하던 significance level의 사용을 반대하고, 그것을 long-run probability $\alpha$ 로 해석하는 것 또한 비과학적인 (unscientific) 것으로 여겨 반대합니다 (Fisher, 1956, p. 42, 재인용: Gigerenzer et al., 2004). 산업계의 quality-control과는 다르게, 연구자는 동일한 실험을 셀 수 없이 여러번 반복하지 않기 때문입니다.</li>
          <li>이러한 측면에서 Fisher는 Neyman과 Pearson이 주장하듯 significance level을 long-run type I error rate으로 해석하는 것은 옳지 않다고 봅니다. 대신 그는 연구를 출판할 때 exact level of significance (e.g. $p &lt; 0.05$ (x) $p = 0.02$ (o))를 명시하여 동료 연구자와 공유해야 한다고 주장합니다.</li>
          <li>Fisher의 $p$-value는 사후에 조정될 수 있습니다. 개별 연구에서 $p$-value를 사후에 (<em>a posteriori</em>) 조정할 때 (e.g. Bonferroni correction) error의 영향이 효과적으로 통제될 수 있기 때문입니다<sup id="fnref:12" role="doc-noteref"><a href="#fn:12" class="footnote" rel="footnote">12</a></sup> (Perezgonzalez, 2015).</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Null hypothesis statistical testing (NHST; 영가설 통계검정)에 이르러서는 Fisher의 signifance test와 Neyman–Pearson의 statistical hypothesis testing의 요소들이 서로 뭉쳐서 다루어지게 되는 듯합니다. 각각의 사례마다 해석되는 방식은 약간의 차이가 있는 듯 한데, 적어도 Fisherian test와 같이 통계적 유의성이라는 개념이 사용되고, N–P test와 같이 $H_0$와 $H_1$중 하나를 선택하는 결정을 내린다는 점은 공통적인 것 같습니다.</li>
</ol>

<p>Fisher의 test와 Neyman–Pearson의 test의 차이에 관해서는 Perezgonzalez (2015)의 리뷰, Berger (2003)의 글, Morimoto (2021)의 글을 보길 바랍니다.</p>

<h2 id="reference">Reference</h2>

<ul>
  <li>Berger, J. O., &amp; Delampady, M. (1987). Testing Precise Hypotheses. <em>Statistical Science, 2</em>(3), 317-335. <a href="https://doi.org/10.1214/ss/1177013238" target="_blank">https://doi.org/10.1214/ss/1177013238</a></li>
  <li>Berger, J. O., &amp; Sellke, T. (1987). Testing a Point Null Hypothesis: The Irreconcilability of P Values and Evidence. <em>Journal of the American Statistical Association, 82</em>(397), 112-122. <a href="https://doi.org/10.2307/2289131" target="_blank">https://doi.org/10.2307/2289131</a></li>
  <li>Berger, J. O. (2003). Could Fisher, Jeffreys, and Neyman Have Agreed on Testing? <em>Statistical Science, 18</em>. <a href="https://doi.org/10.1214/ss/1056397485" target="_blank">https://doi.org/10.1214/ss/1056397485</a></li>
  <li>Cox, D., &amp; Mayo, D. G. (2010). Objectivity and conditionality in frequentist inference. In D. G. Mayo &amp; A. Spanos (Eds.), <em>Error and Inference: Recent Exchanges on Experimental Reasoning, Reliability, and the Objectivity and Rationality of Science</em>. Cambridge University Press.</li>
  <li>Fisher, Ronald A. (1935). <em>The design of experiments</em>. Oliver &amp; Boyd</li>
  <li>Fisher, R. A. (1935b). Statistical Tests. <em>Nature, 136</em>(3438), 474. <a href="https://doi.org/10.1038/136474b0" target="_blank">https://doi.org/10.1038/136474b0</a></li>
  <li>Fisher, Ronald A. (1956). <em>Statistical methods and scientific inference: Vol. viii</em>. Hafner Publishing Co.</li>
  <li>Gigerenzer, G., Krauss, S., &amp; Vitouch, O. (2004). The Null Ritual: What You Always Wanted to Know About Significance Testing but Were Afraid to Ask. In<em>The Sage handbook of quantitative methodology for the social sciences</em> (pp. 392-409). SAGE Publications, Inc. <a href="https://doi.org/10.4135/9781412986311.n21" target="_blank">https://doi.org/10.4135/9781412986311.n21</a></li>
  <li>Greenland, S. (2023). Divergence versus decision <i>P</i>-values: A distinction worth making in theory and keeping in practice: Or, how divergence <i>P</i>-values measure evidence even when decision <i>P</i>-values do not. <em>Scandinavian Journal of Statistics, 50</em>(1), 54-88. <a href="https://doi.org/10.1111/sjos.12625" target="_blank">https://doi.org/10.1111/sjos.12625</a></li>
  <li>Hubbard, R., &amp; Bayarri, M. J. (2003). P Values are not Error Probabilities (<em>Duke University Working Papers Series</em>, Issue 2003-26).</li>
  <li>Lakens, D. (2024). <em>Improving Your Statistical Inference</em> (1.4.5 ed.). URL:<a href="https://lakens.github.io/statistical_inferences" target="_blank">https://lakens.github.io/statistical_inferences</a></li>
  <li>Morimoto, R. (2021). Stop and Think About p-Value Statistics: Fisher, Neyman, and E. Pearson Revisited. <em>Annals of the Japan Association for Philosophy of Science, 30</em>, 43-65. <a href="https://doi.org/10.4288/jafpos.30.0_43" target="_blank">https://doi.org/10.4288/jafpos.30.0_43</a></li>
  <li>Perezgonzalez, J. D. (2015). Fisher, Neyman-Pearson or NHST? A tutorial for teaching data testing [Review]. <em>Frontiers in Psychology</em>, 6. <a href="https://www.frontiersin.org/articles/10.3389/fpsyg.2015.00223" target="_blank">https://www.frontiersin.org/articles/10.3389/fpsyg.2015.00223</a></li>
  <li>Spanos, A. (2003). <em>Probability Theory and Statistical Inference (Econometric Modeling with Observational Data)</em>: CAMBRIDGE UNIVERSITY PRESS.</li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Fisher의 test는 Francis Edgeworth의 연구와 Karl Pearson의 연구를 바탕으로 한다고 알려져 있습니다 (Spanos, 2003, 14.2.4절). Fisher 이전의 가설검정에 관한 내용은 추후 공부하여 정리해보고 싶네요. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3" role="doc-endnote">
      <p>“Either an exceptionally rare chance has occurred, or the theory of random distribution is not true” <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>이 논리가 옳지 않다는 주장에 대해서는 Hubbard &amp; Bayarri (2003); Berger &amp; Delampady(1987), 4.6절; Berger &amp; Selke (1987)을 보세요. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4" role="doc-endnote">
      <p>참고로, Egon Pearson은 Karl Pearson의 아들이에요. <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:5" role="doc-endnote">
      <p>Neyman과 Pearson은 임의의 특정한 시행에서는 error가 발생했는지 알 수 없으므로 long-run probability, 즉 (long-run) type I error를 중요하게 다루어야 한다고 주장합니다. 여기서 long-run probability란  특정한 statistical experiment를 셀 수 없이 많이 반복하여 계산된 확률을 의미합니다. 즉 “type I error rate ($\alpha$)이 $0.05$이다”라는 말은 statistical experiment를 반복적으로 여러 번 시행하여 수행한 test 결과의 $5\%$는 type I error라는 뜻입니다. 가령 $10,000$번의 동일한 시행으로 얻은 sample 그룹 $10,000$개로 $10,000$번의 test를 수행하였다고 합시다. $\alpha = 0.05$는 각각의 시행에 대한 test의 결과 $10,000$번 중 $500$번의 검정 결과에서 type I error가 발생할 수 있다는 말인 것이죠. <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:6" role="doc-endnote">
      <p>“significantly different from zero” <a href="#fnref:6" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:7" role="doc-endnote">
      <p>Fisher는 ‘$H_0$를 수용<sup>accept</sup>‘한다는 개념이 논리적 오류라고 봅니다 (Fisher, 1935, p. 16; Fisher, 1935b; Morimoto, 2021; Cox &amp; Mayo, 2010). 이는 포퍼 (Popper)의 반증주의<sup>falsificationism</sup>와 비슷한데요, 반증<sup>falsification</sup>은 논리적으로 타당한 후건 부정 (<em>modus tollens</em>; $P \rightarrow Q, \neg Q \therefore \neg P$)이지만, 검증<sup>verification</sup>은 타당하지 않은 추론이라는 것입니다. (Morimoto, 2021). Fisher라면 ‘Type II error는 $H_0$가 실제로 거짓일 때 $H_0$를 <strong>기각하지 못하는 (failure to reject) 오류로 정의된다</strong>‘라는 말에 동의했을 지언정, ‘Type II error는 $H_0$가 실제로 거짓일 때 $H_0$를 <strong>수용하는 (accept) 오류로 정의된다</strong>‘는 말에는 <strong>동의하지 않았을 것</strong>이며, 후자는 Neyman과 Pearson이 받아들일만한 정의였을 것이라고 Morimoto는 설명합니다 (Morimoto, 2021). 가령 ‘모든 백조는 희다’라는 보편 진술<sup>universal statement</sup>은 ‘어떤 백조는 검다’라는 관찰 진술에 의해 반증<sup>falsify</sup>됩니다. 하지만 ‘모든 백조는 희다’라는 보편 진술 자체가 검증<sup>verify</sup>되기는 매우 어려울 것입니다. 모든 백조를 전수조사하는 것은 불가능에 가깝기 때문입니다. 제가 이해하기로는, 마찬가지로 어떤 통계 가설이 반증(falsification)된 이후에서야 우리는 그 가설이 거짓인 것처럼 행동할 수 있습니다. $H_0$가 기각된 이후 우리는 $H_1$이 잠정적으로 참인 것처럼 행동하게 되지만, $H_1$은 분포와 비교하여 기각될 수 없는 종류의 가설이기 때문에 $H_0$를 ‘수용 (accept)’한다는 개념은 타당하지 않은 것입니다. <a href="#fnref:7" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:8" role="doc-endnote">
      <p>제가 이해한 바로는, Fisher의 관점에서 $p$-value를 믿음의 ‘척도’로 본다면 이 척도가 적절한지 아닌지를 판단할 방법이 있어야 하고, $p$-value는 test statistics를 통해 계산되는 변수라는 점에서 test statistic이 적절한지 판단할 방법이 있어야 하지만, Fisher는 이에 관한 주제를 다루지 않습니다. Fisher의 test가 $p$-value를 통해 $H_0$가 얼마나 믿을만한지에 대한 척도를 제공하는 한 이 문제가 해결되어야 합니다. Neyman과 Pearson은 test를 애초에 $H_0$가 믿을만한지에 관한 척도를 알기 위해 사용하지 않고, test statistic이 적절한지 $\alpha$와 $\beta$를 기준으로 결정함으로써 문제를 해결한다는 것 같습니다. <a href="#fnref:8" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:9" role="doc-endnote">
      <p>제가 이해하기로는, N-P test에서 $\tau(\mathbf{x})$와 $c_\alpha$를 비교하는 것, 혹은 간접적으로 $p$와 $\alpha$를 비교하는 것은 data가 $H_0$ 통계 모델에서 나올 가능성이 얼마나 높은지 보려는 것이 아닙니다. 해당 시행에서 얻은 데이터를 바탕으로 $H_0$가 믿을만한지에 대한 척도를 세우려는 것도 아닙니다. 그저 해당 의사결정 규칙을 수없이 많이 사용했을 때 발생할 type I error의 long-run probability를 $\alpha$로 제한하려는 것이 목적인 것입니다. <a href="#fnref:9" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:10" role="doc-endnote">
      <p>Fisher의 test를 따라 p-value가 너무 낮으면 $H_0$를 신뢰하기 어렵게 만드는데, 이는 암묵적으로 다른 가설이 더 신뢰할만 하다는 것을 의미한다는 점에서 그런 것 같습니다. <a href="#fnref:10" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:11" role="doc-endnote">
      <p>사실 Spanos의 ‘다룬다’ (operationalize)라는 서술이 무엇을 의미하는지는 잘 모르겠어요. <a href="#fnref:11" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:12" role="doc-endnote">
      <p>Fisher가 이런 주장을 직접 하였는지에 관한 자료나 문헌은 찾지 못했음.. 아마도 Fisher test에서의 $p$-value에 대한 일반적인 설명인 듯합니다. <a href="#fnref:12" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Tope</name></author><category term="blog" /><category term="statistics" /><summary type="html"><![CDATA[머리말 널리 사용되는 null hypothesis statistical testing영가설 통계 검정은 학부 1학년 수준 통계학에서 배울 정도로 널리 사용되는 가설 검정법이에요. 이는 Fisher의 test of significance와 Neyman-Pearson의 statistical hypothesis testing의 여러 요소가 뒤섞여 사용되고 있는데, 한번 자세히 알아봅시다.]]></summary></entry><entry xml:lang="ko"><title type="html">마사 누스바움의 「혐오와 수치심」</title><link href="http://localhost:4000/blog/2024/05/14/hiding-from-humanity.html" rel="alternate" type="text/html" title="마사 누스바움의 「혐오와 수치심」" /><published>2024-05-14T00:00:00+09:00</published><updated>2024-05-14T00:00:00+09:00</updated><id>http://localhost:4000/blog/2024/05/14/hiding-from-humanity</id><content type="html" xml:base="http://localhost:4000/blog/2024/05/14/hiding-from-humanity.html"><![CDATA[<style>
img{
    float: left;
    margin: 0.8em;
}
    </style>

<p align="left">
  			<img src="/files/cover/2024-05-14-hiding-from-humanity.jpg" width="20%" />
</p>

<p>누스바움은 2004년 펴낸 「혐오와 수치심」(Hiding from Humanity: Disgust, Shame, and the Law)에서 혐오와 수치심이 공적으로 고려되지 말아야 할 감정이라고 주장한다. 저자는 혐오와 수치심의 심리적 기원과 인지적 내용에 대한 문헌 고찰을 바탕으로 두 감정이 개인, 특히 힘 없는 집단의 성원을 예속시키고 낙인찍는다고 설명한다. 
<!--more-->
심리학, 문학, 사회학 등의 문헌을 바탕으로 두 혐오와 수치심의 기원을 분석하는 점이 흥미로웠고, 특히 그러한 감정이 어떻게 시민을 배제하고 비인간화시키는지, 또한 이것이 누스바움이 생각하는 자유주의와 어떻게 상충하는지에 관한 밀도있는 설명은 상당히 설득력있었다. 한편으로 누스바움이 지지하는 인간관과 정치관을 더 알아보고 싶고, 특히 아마르티아 센과 함께 펴낸 역량 접근법에 관해 자세히 알아보고 싶어졌다. 누스바움의 견해에 대한 지지, 비판, 후속 연구가 여럿 있을 법한데, 이에 관해서도 지속적으로 공부하고 싶다.</p>

<h2 id="1장-감정과-법">1장 감정과 법</h2>

<h3 id="요약">요약</h3>
<p>감정은 내가 상황을 믿고 평가하는 바에 관한 복잡한 사고를 수반한다. 이러한 감정은 종종 법을 만들고 적용할 때 고려되는데, 어떤 감정이 이성적인 사람이 겪을 수 있는 타당한 감정인지, 그 감정이 법에 고려되는 것이 적절한지 평가될 필요가 있다. 법에 감정이 고려되는 것은 자유주의와도 양립가능한데, 정치적 자유주의에서 여러 의견을 존중하기 위해 필요한 공통되는 가치들이 보호되어야 하기 때문이다.</p>
<h3 id="문장">문장</h3>
<blockquote>
  <p>“감정은 지향적 대상에 초점을 두며, 그러한 대상에 대한 평가적 믿음을 수반한다는 것이다.” (p. 67)</p>
</blockquote>

<blockquote>
  <p>“그러나 이러한 [혐오와 수치심이라는] 감정은 인지적 내용에 문제를 지니고 있으며, 이런 점에서 사회적으로 작동할 경우 공정한 사회에 위험을 초래할 수 있다.” (p. 136)</p>
</blockquote>

<h2 id="2장-혐오와-우리의-동물적-육체">2장 혐오와 우리의 동물적 육체</h2>
<h3 id="요약-1">요약</h3>
<p>혐오라는 감정은 동물의 취약성 및 유한성에 관련된 오염 물질이나 부패와 관련된 오염 물질을 접촉⋅흡수하면 자신이 동물의 지위로 격하되거나 취약⋅유한해지고 부패되거나 오염될 수 있다는 사고를 바탕으로 한다. 분개와는 달리, 혐오는 자신이 오염될 수 있다는 가설적이고 신비적인 사고에 기반하여 오염물질을 배제하고 떼어내려는 사고로 이어진다. 법에 혐오를 고려해야 한다는 주장도 있지만, 누스바움은 혐오가 ① 실제 위험과 부합하지 않고 ② 비합리적이며 신비한 사고에 기반하며 ③ 그것이 지니는 전염성과 유사성을 바탕으로 특정 집단에 오염성⋅동물성⋅취약성을 투영하여 집단을 배제하기 위해 사용될 수 있다는 점을 들어 혐오가 법에 고려되어서는 안된다고 주장한다.</p>
<h3 id="문장-1">문장</h3>
<blockquote>
  <p>“앵기알과 로진, 그리고 밀러는 모두 혐오를 자극하는 사고는 우리 자신과 인간이 아닌 동물, 또는 우리 자신과 우리가 지닌 동물성 간의 경계를 정돈하려는 관심과 연결되어 있다고 결론짓는다.” (p. 169)</p>
</blockquote>

<blockquote>
  <p>” 우리는 인종주의자와 부패한 정치인들이 바람직한 행위를 하도록, 나아가 생각을 고치도록 요구해야 한다. 잘못된 행위를 저질렀으면 처벌을 받아야 한다. 그러나 그들을 토사물이나 배변 같다고 생각하는 게 [현실을 개선하는 데] 얼마나 도움이 되는가? 우리는 분명 그들을 추방시킬 수 없으며, 설령 할 수 있다 하더라도 그래서는 안 된다. 혐오는 우리가 사회적 순수함에 대한 비현실적인 낭만적 환상에 사로잡히게 하며, 인종 관계와 정치인들의 행위를 개선하기 위해 우리가 취할 수 있는 현실적인 수단에 대한 사고에서 멀어지게 한다. 어떠한 집단이 비도덕적이라 하더라도 그들을 오물처럼 취급해서는 아무것도 얻을 수 없다. 또한 … 그러한 취급은 전염과 유사성에 대한 신비적 사고를 통해 특정 집단이나 해를 끼치지 않는 사람들까지 희생시키는 태도로 이어지기 쉽다.” (pp. 199 – 200)</p>
</blockquote>

<blockquote>
  <p>“이러한 행위는 오염물이며, 그/녀는 우리 공동체를 타락시킨다. 이러한 오염물을 멀리 두는 편이 더 좋을 것이다.” (중략) 
 그러나 단지 “나는 그들을 만나거나 그들의 행위를 마주치지는 않았지만, 자신들의 침대에서 성행위를 나눈 이 남성들은 우리 사회의 오염물이다.” 또는 “우리에게 아무런 해로운 행위를 가하지 않았지만, 우리 도시의 길거리를 돌아다니는 이 유대인들은 해로운 오물이다.”라고 말하는 것이라면, 이러한 경우의 오염에 대한 사고는 지극히 애매하고 불투명하다고 하겠다. (중략)
 … 우리가 실제로 그 배경에 있는 사실, 즉 “우리가 질색함을 느끼는 동물성과 유한성의 측면에 거리를 두기 위해 우리는 이러한 사람들을 대리 동물로 선택했다.”는 점을 밝혀내고 진술한다면, 일단 드러나게 된 그 이유는 결코 법률적 규제의 아무런 근거도 제공해 주지 못할 것이다. (pp. 228 – 229)</p>
</blockquote>

<h2 id="3장-혐오와-법">3장 혐오와 법</h2>
<h3 id="요약-2">요약</h3>
<p>혐오 (disgust)는 가설적 사고를 바탕으로 개인의 존엄과 자유를 침해하며 특히 취약한 사람들을 예속시키고 주변화 할 수 있다는 점에서 법적 판단 및 공적 행위의 지침이 될 수 없다. 설령 고려되어도 그 범위는 원초적 혐오의 대상에 대해서, 주요 가치가 훼손되거나 실질적 위해가 가해지는 경우로 제한된다. 전통적으로 혐오를 근거로 판단되어 온 포르노와 시체 성애는 부당한 행위로 인해 발생하는 분개 반응을 통해 판단되는 것이 타당하다. 또한, 범죄자와 악한 자를 혐오의 대상으로 삼는 것은 그들이 우리와 같은 도덕적 행위자로서 책임을 지닌다는 사실을 은폐하고 우리 스스로 성찰할 수 없도록 하므로, 혐오 반응보다는 분개 반응 (indignation)을 공적 지침으로 사용하는 것이 타당하다.</p>
<h3 id="문장-2">문장</h3>
<blockquote>
  <p>요컨대, 혐오가 우리가 존중하는 가치를 지지하는 것처럼 보이는 경우라 하더라도, 우리는 이 감정을 보다 면밀히 검토해야 한다는 것이다. 혐오는 오염과 불결함에 초점을 둔 감정이므로 성차별적 내용을 지닌 외설물이 여성에게 위해를 주고 있는지의 문제와 같은 핵심적인 사안과 무관하며, 이 문제를 판단하는 근거가 되기에 부적절하다. (pp. 267 – 268)</p>
</blockquote>

<blockquote>
  <p>이때 혐오는 ‘단지 추정상의’ 또는 가설적인 형태를 띤다. 실제로 불쾌감을 느끼고 자주 그러했다면, 이는 동성애 행위가 동의하지 않은 사람에게 어떠한 직접적인 불쾌감을 주었기 때문이 아니라 일어나는 일을 ‘상상해서’ 또는 법이 동성애 행위를 방치하고 있다고 생각해서 발생한다. 이런 이유에서 나는 법적 기준으로 혐오의 사용은 가치가 없으며, 혐오에 호소하기보다는 다른 개념, 특히 손상이나 위해와 같은 개념으로서 그러한 위해의 증거를 조사하는 편이 낫다고 주장할 것이다. (p. 235)</p>
</blockquote>

<h2 id="4장-얼굴에-새기기-수치심과-낙인">4장 얼굴에 새기기: 수치심과 낙인</h2>
<h3 id="요약-3">요약</h3>
<p>수치심 (shame)이라는 감정은 유아기의 나르시시즘적 욕구가 좌절되고 자신이 불완전하고 취약한 존재라는 인식에 기인한다. 완전성과 취약성에 대한 인식의 불균형은 개인이 원초적 수치심을 겪게 하고, 이에 반응하여 자신을 완전하게 하려는 시도는 정신과적 증상의 발현으로 이어질 수 있다. 이러한 원초적 수치심은 건설적 수치심과 구별된다. 건설적 수치심은 인간이 취약하다는 인식을 바탕으로 사람들 간의 상호 의존을 강화하며 바람직한 도덕 규범에 기반하기 때문이다. 그럼에도 수치심은 공적으로 경계해야 하는 감정인데, 집단에 낙인찍는 행위는 자신의 완전성을 확보하려는 유아기적 나르시시즘에 의해 경험하는 수치심에 대한 공격적 반응으로서 낙인 찍힌 집단 성원의 고유성과 개별성을 지우고 그들을 비인간화한다는 점에서 그렇다.</p>
<h3 id="문장-3">문장</h3>
<blockquote>
  <p>유아적 전지전능감, 그리고 (불가피한) 나르시시즘적 좌절과 연관된 원초적 수치심은 우리의 삶 속에 잠복해 있으며, 유아의 분리성과 자율성이 발달된 뒤에도 오직 부분적으로만 극복된다 (pp. 339 – 340)</p>
</blockquote>

<blockquote>
  <p>(……) 이러한 환상들이 다른 사람의 도움을 그다지 필요로 하지 않고 자기 힘으로 살아가는 사람이 진짜 남자라는 널리 만연된 미국적 환상과 결합하면서, 고통스러운 사회적 긴장 요소를 낳고 있다. (……) 아무도 소년들에게 자신들의 내적 세계를 탐구하고 표현하라고 말해 주지 않는다. 소년들은 감정 표현에서는 까막눈이다. (……) 킨들론과 톰슨이 특히 문제가 있다고 여기는 소년 문화의 특징 중 하나는 여성적이라고 여겨지는 성격의 모든 측면(감정 특히 욕구, 슬픔, 동정심)을 폄하하는 경향이다. (pp. 367 – 369)</p>
</blockquote>

<blockquote>
  <p>수치심은 좋은 이상과 관련해서는 귀중한 도덕적 기능을 할 수 있다. 그러나 수치심의 유아기적 기원을 고려하면 사회가 수치심을 주는 행위에 대해 마음 편히 신뢰하거나 액면 그대로 믿을 수 없다는 점을 알게 된다. 사회가 수치심을 주는 행위는 통제에서 벗어나기 쉬우며, 진정으로 가치 있는 규범 내에서 이를 적절하게 조정하기 어렵다. 도덕주의에 근거해 높은 이상을 외치는 이면에는 … 그러한 규범적 가치와 근본적으로 무관한 훨씬 더 원초적인 형태의 욕구가 자리잡고 있을 가능성이 높다. (pp. 401 – 402)</p>
</blockquote>

<h2 id="5장-시민들에게-수치심을-주어야-하는가">5장 시민들에게 수치심을 주어야 하는가?</h2>
<h3 id="요약-4">요약</h3>
<p>누스바움은 수치심 처벌이 모욕과 불평등에 기반하고 폭력을 오히려 촉진시킬 수 있으며 적절하게 집행될 수 없다는 점에서 공적으로 사용되어선 안된다고 본다. 소위 ‘일탈집단’에 대한 도덕적 공황은 그들이 정상인의 가치를 훼손할 것이라는 가설적 사고에 의한 나르시시즘적 공격성에서 기원하며, 설령 그 대상이 범죄 집단이라 해도 개인의 권리를 침해하기 십상이다. 특히 법을 세울 때 고려될 수 있는 공동체의 ‘단일한 가치 내지 의견’이라는 환상은 권력 없는 구성원을 집단과 공론장에서 배제하여 그들의 가치와 의견을 묵살한다는 점에서 문제가 있다. 따라서 우리 법은 모두에게 평등한 자유와 개인의 권리를 보호하도록 설계되어야 한다.</p>

<h2 id="6장-수치심으로부터-시민을-보호하기">6장 수치심으로부터 시민을 보호하기</h2>
<h3 id="요약-5">요약</h3>
<p>누스바움은 사회구성원이 수치심과 낙인을 겪지 않게 하기 위한 법의 역할이 중요하다고 본다. 개인이 수치심과 낙인을 겪지 않고 살아가기 위한 역량이 보호되어야 하며, 낙인에 의거한 법 집행이 허용되어서는 안된다. 구체적으로는 차별금지법을 통해 동성애자 등의 소수자를 낙인에서 보호해야 하며 이러한 행위가 사회에서 용납되지 않음을 선언해야 한다. 이에 더하여, 장애인을 비인간화하는 전통적 개인관⋅시민관에서 벗어나 이들이 시민의 일원으로서 권리를 보장받고 역량을 함양할 수 있도록 법을 정교화해야 한다. 한편 누스바움은 스스로 수치스럽게 여길 수 있는 활동과 상상을 위한 프라이버시가 동의하지 않은 이에게 명백한 위해를 주지 않는 이상 보호되어야 한다는 점도 짚는다.</p>
<h3 id="문장-4">문장</h3>
<blockquote>
  <p>나에게 모금 편지를 쓴 사람은 증오를 표현하고 있기는 하지만 범죄 의도를 보여 주는 증거는 없다. 그래서 이 사람의 발언은 표현의 자유로 보호받을 수 있고, 처벌할 수 없다. 반면, 증오 범죄를 저지른 사람은 자신의 정치적 견해에 더해 증오에 기초한 특정 형태의 범의를 지닌다. 이러한 범의는 본질적으로 행위를 겨냥한 것이고, 이는 소책자에 표현된 보호받는 견해의 범위를 벗어난다. 처벌 대상이 되는 것은 단순히 특정 형태의 견해가 아니라 특정 형태의 범죄 의도를 지닌 행위이다. (…) 분명 이러한 구분은 내리기 쉽지 않고, 그래서도 안 된다. 수많은 나라에서 정치적인 증오 발언을 규제하고 있다.  (…) 그러나 독일의 경우에도 반유대주의 내용을 담고 있는 소책자를 쓰는 것 자체를 범죄로 규정하려는 시도는 없다. 이러한 자료가 유포되지 못하게 막는 것으로 충분하기 때문이다. (pp. 533 – 534)</p>
</blockquote>

<blockquote>
  <p>… 우리 모두가 많은 손상을 지니고 있다는 점을 인정하는 데서 시작한다. 그리고 삶은 “정상적인” 필요를 갖는 기간뿐 아니라 평범하지 않고 비대칭적인 의존을 갖는 기간 — 얼마간 오래 지속되는 — 을 포함한다는 점을 인정해야 한다. 이러한 의존 기간 동안 ‘정상인’의 상황은 하나 이상의 측면에서 특이한 장애를 지닌 사람이 처한 상황에 가까워진다. 이것은 우리가 ‘정상인’이 자존감을 지닐 수 있는 사회적 조건을 형성하고자 할 때, 평생 동안 장애를 안고 살아가는 사람들의 자존감을 함께 사고해야 하고, 그들이 지닌 완전한 인간성과 개별성을 인정하고 뒷받침할 수 있는 방법을 고안하기 위해 노력해야 함을 뜻한다. (…) 유능하면서도 도움을 필요로 하는 존재라는 좀 더 복잡한 이미지로 시민을 생각하는 것이다. (p. 562)</p>
</blockquote>

<h2 id="7장-인간성을-숨기지-않는-자유주의">7장 인간성을 숨기지 않는 자유주의</h2>
<h3 id="요약-6">요약</h3>
<p>누스바움은 혐오와 수치심이라는 감정이 힘 없는 집단의 구성원을 예속하고 낙인 찍는데 사용될 수 있으므로 평등한 존엄을 핵심 가치로 하는 자유주의 사회에서 공적으로 고려되어서는 안된다고 본다. 그는 사회적 효용에 근거한 밀의 자유주의가 존엄과 자유를 진리 아래에 두고 상호존중과 평등을 기초로 하지 않는다는 점을 지적하고, 또한 공동체주의적 자유주의와 사회계약론적 자유주의가 모두 상호 존중과 평등을 기초로 하지 않고 낙인과 사회적 위계를 심화시킨다는 점을 지적한다. 그가 보기에는 인간이 유한하며 도움을 필요로 하는 존재라는 사실에 기초하는 자유주의관이 더 적절하며, 이에 따라 개인이 기능을 발휘하기 위한 역량 분배에 초점을 두어야 한다고 주장한다. 이러한 정치관에서 공적으로 고려되어야 할 감정은 혐오와 수치심이 아니라 분개, 두려움과 슬픔, 감사와 사랑, 동정심과 같은 도덕 감정이다.</p>

<h3 id="문장-5">문장</h3>
<blockquote>
  <p>나는 이것이 진리에 기초에 자유를 정당화하는 밀의 주장에 대한 가장 중요한 비판이라고 생각한다. 개별 시민을 전체 복리의 수단으로, 실제 한 세대를 다음 세대의 진보를 위한 수단으로 간주하기 때문에 ‘잘못된 방식’의 정당화라는 주장이다. 모든 인간은 존엄성을 지니므로 존중받아야 하며, 정치는 모든 시민이 평등하게 지니는 존엄성을 기초로 해야 한다는 생각에서 출발하게 되면, 밀이 잘못된 길로 가고 있다는 사실을 알게 될 것이다. (p. 588)</p>
</blockquote>

<blockquote>
  <p>이 책의 주장과 부합할 수 있는 인간에 대한 정치관을 고찰한다면, 그러한 시각은 인간의 능력뿐 아니라 불완전성과 필요, 그리고 때때로 비대칭적 필요를 함께 강조할 필요가 있다.  (……) 인간에 대한 이러한 정치관에 기초할 경우, 정치가 분배하는 좋은 것(복지)을 단순히 자원이나 물질 — 그 자체로 일정한 좋음이나 가치를 가진 것처럼 — 로 보기보다는 서로 맞물려 있는 인간 역량의 집합으로 생각하는 것이 자연스러울 것이다. (pp. 615-616)</p>
</blockquote>

<blockquote>
  <p>… 인간 삶에 내재된 깊은 어려움 — 이러한 어려움 때문에 공적인 감정으로 혐오와 수치심에 의존하게 된다. — 을 고찰함으로써 우리는 적어도 자유주의 사회가 소중히 여기고 나아가 발전시켜야 하는 일정한 역량의 윤곽을 볼 수 있게 되었다. 지배하기보다는 상호 의존하는 관계를 즐길 수 있는 능력, 자신과 다른 사람의 불완전성과 동물성, 유한성을 인정할 수 있는 능력이 그것이다. (p. 623)</p>
</blockquote>

<h1 id="reference">Reference</h1>
<ul>
  <li>
    <p>Nussbaum, M. C. (2015). 혐오와 수치심. [Hiding from Humanity: Disgust, Shame, and the Law]. (조계원, Trans.). 민음사.</p>
  </li>
  <li>
    <p>혐오와 수치심 표지 사진, 알라딘. <a href="https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=54798938&amp;start=slayer" target="_blank">https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=54798938&amp;start=slayer</a></p>
  </li>
</ul>]]></content><author><name>Tope</name></author><category term="blog" /><category term="philosophy" /><category term="book" /><summary type="html"><![CDATA[누스바움은 2004년 펴낸 「혐오와 수치심」(Hiding from Humanity: Disgust, Shame, and the Law)에서 혐오와 수치심이 공적으로 고려되지 말아야 할 감정이라고 주장한다. 저자는 혐오와 수치심의 심리적 기원과 인지적 내용에 대한 문헌 고찰을 바탕으로 두 감정이 개인, 특히 힘 없는 집단의 성원을 예속시키고 낙인찍는다고 설명한다.]]></summary></entry><entry xml:lang="ko"><title type="html">개인주의적 사회관에 대한 비판 — 정리해보았다</title><link href="http://localhost:4000/blog/2024/04/06/individualist.html" rel="alternate" type="text/html" title="개인주의적 사회관에 대한 비판 — 정리해보았다" /><published>2024-04-06T00:00:00+09:00</published><updated>2024-04-06T00:00:00+09:00</updated><id>http://localhost:4000/blog/2024/04/06/individualist</id><content type="html" xml:base="http://localhost:4000/blog/2024/04/06/individualist.html"><![CDATA[<p>모 비공개 글에서 아이디어를 얻어, 전통적 자유주의 관점에서 전제되는 개인주의적 사회관이 어떻게 비판되는지에 대해 알아보고 정리해보고자 한다. 이 주제는 이미 수많은 학자들이 자세히 다루었는데, 그중 특히 정치철학자 <a href="https://philpapers.org/browse/iris-marion-young" target="_blank">아이리스 영 (Iris Marion Young)</a>의 저서「차이의 정치와 정의」에 드러난 그녀의 견해를 주로 참고하였다. <!--more--></p>

<h2 id="개인주의적-사회관">개인주의적 사회관</h2>
<p>자유주의적 관점에서 주체적인 인간으로 살아가는 것은 곧 스스로 결정하고 표현하며 행위하는 인간으로서 살아가는 것이다.</p>
<ul>
  <li>자유주의<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> 세계관에서 개인은 <em>사회 이전에</em>  존재하며, 각 개인은 다른 개인들과 독립되고 분리되어 존재한다<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>. 독립적이고 동등한 개인들은 스스로 선택하고 의견을 표명하며 행위할 자유를 가지고, 사회 규범을 선택하여 살아갈 자유를 지닌다. 이러한 자유주의의 핵심 가치는 사람에 대한 존중에서 시작한다. 상대방을 한 인간으로서 존중하기 때문에 상대가 지니는 다양한 생각과 가치관을 존중하고 그가 행하는 바를 존중하는 것이다 (Nussbaum, 2015, p.113).  이는 곧 상대에게 위해를 주지 않는 한, 개인이 지니는 자유를 침해해서는 안된다는 자유주의의 핵심 주장으로 이어진다.</li>
  <li>한편 정신 능력에 근거하는 인격 개념에 따르면<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup>, 인간은 “자유롭게 스스로 결정하며, 스스로를 발현하는 소질을” 가지므로 존엄하다. (이석배, 2019).  다시 말해 자기 결정 능력과 자기 표현 능력이 보장될 때 인간의 존엄이 보장된다는 것이다.</li>
  <li>앞에서 제시한 두 입장을 정리해보자. <strong>주체적인 인간으로서 삶을 살아간다는 것은 스스로 결정⋅표현하고 행동하며 살아간다는 것</strong>이다. 인간이라면 자기 표현과 자기 결정의 소질을 가지고 있으므로, 상대방을 인간으로서 존중한다면 그가 지닌 소질을 발현할 자유를 존중해야 한다. 아마 대다수의 사람은 인간을 인간으로서 간주하고 존중하는 것이 옳다고 생각할 것이다.</li>
</ul>

<h2 id="개인주의적-사회관에-대한-비판">개인주의적 사회관에 대한 비판</h2>
<p>그러나 자기 인식과 자아 정체성 자체가 사회적⋅관계적으로 확립된다고 보는 관점에서, 개인은 타인과 분리되어 자유롭고 독립적으로 존재하지 않는다.</p>
<ul>
  <li>19세기 후반에 접어들면서 벤담, 밀, 스펜서같은 전통적 자유주의자가 상정하는 개인주의적 사회존재론에 대한 비판이 증가했었고 20세기 후반에는 자유주의적 정치 전통에 대한 공동체주의자 (communitarian)들의 비판이 활력을 얻는다 (Courtland et al., 2022)<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup> . 이들은 <strong>개인 정체성, 자기 의식 (self-conciousness), 표현과 사고에 대한 언어가 본래 사회적이고 관계적이라는 점<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup></strong> 을 지적한다 (Kuchem, 2020). 개인은 사회적 상호작용 이전에 존재하지 않고 사회 외부에 존재하지도 않는다. 개인과 사회 집단<sup id="fnref:6" role="doc-noteref"><a href="#fn:6" class="footnote" rel="footnote">6</a></sup>은 사회적 상호작용을 통해 관계하며 구성되는 것이다. 개인은 “언제나 이미 한 집단의 구성원으로서 존재해왔음”을 체험하고, 이것이 개인의 자아를 형성한다 (Young, 2017, p. 117).</li>
  <li>예를 들어 나는 <em>이미</em> <sup id="fnref:7" role="doc-noteref"><a href="#fn:7" class="footnote" rel="footnote">7</a></sup> 학생, 남성, 한국인이라는 사회 집단에 속한 것으로 타인에게 인식된다. 나는 ‘학생이므로 공부를 하는 것이 바람직하다’라거나 ‘남성이므로 듬직한 풍채를 가질 것이라는 혹은 가지는 게 바람직하다’는 기대, ‘한국인이니까 강의 중에 질문을 잘 던지지 않을 것’이라는 모종의 <strong>고정관념, 규범 및 속성에 비추어 인식된다</strong>. 타인이 나를 어떻게 인식하는지는 내가 나를 이해하는 방식과 떼어낼 수가 없고, 나의 정체성은 타인이 나를 어떤 사람이라고 보는지와 관련하여 규정된다. 예컨대 나는 스스로가 자연 계열 학부생의 일원임을 자각하는데, 바로 그 ‘자연 계열 학부생’이라는 사회 집단에 대한 속성이나 규범은 사회적으로, 즉 타인에 의해 이미 구성된다. 나의 일부를 구성하는 자연 계열 학부생으로서의 정체성은 타인이 자연 계열 학부생에게 가지는 규범과 기대를 내포하고 있는 것이다.</li>
  <li>물론 자아와 정체성이 <strong>타인의 인식에 의해서만 결정되는 것은 아니다</strong>. 우리는 다종다양한 사회 집단의 일원으로서, 우리의 정체성은 여러 가지 소속감과 자기 인식의 집합으로 형성된다. 영이 설명하듯, 우리는 어떠한 <strong>사회 집단의 일원이었다가 아닐 수도</strong> 있으며 나아가 자신이 속한 집단의 <strong>일원으로서 그 집단의 속성과 규범을 재규정할 수도</strong> 있다 (Young, 2017, p.117).</li>
  <li>이러한 <strong>자기 인식과 정체성은 곧 우리의 사고, 표현, 행동을 결정</strong>한다. 가령 자신이 한국 사회에서 다수자인 한국인일 때 가지는 사고⋅표현⋅행동 등은 러시아 사회에서 소수자인 한국인일 때 가지는 그것과는 확연히 다를 것이다. 또 다른 예시로, 자신이 자본가 사회 집단의 일원으로서 정체화할 때와 노동자 사회 집단의 일원으로서 정체화할 때 서로 다른 정치적 사고와 행위를 할 것이라는 점은 분명해 보인다.</li>
  <li>결론적으로 <strong>정체성, 자기 의식, 사고와 표현 및 행동이 본래 타인과 관계하며 확립</strong>되는 이상, 고전적 자유주의에서 이야기하는 ‘사회 이전의 개인’과 타인-독립적인 ‘원자화된 개인’은 존재하지 않는다.</li>
</ul>

<p>다른 사람과 온전히 독립적인 개인은 없다. 그럼에도 우리는 어느 정도의 자유 의지를 가지고 생각과 결정을 할 수 있다고 믿는다. 우리는 사회<em>와 함께</em>  형성되었다는 것을 인식하고 그 안에서 살아가기 때문이다. 스스로가 타인과 관계하며 존재한다는 자기 인식은 <strong>사회 속의</strong> 나를 바라보는 핵심적인 사고이자 틀이라고 할 수 있겠다.</p>

<h2 id="reference">Reference</h2>
<ul>
  <li>Courtland, S. D., Gaus, G., &amp; Schmidtz, D. (2022). Liberalism. In E. N. Zalta (Ed.), <em>The Stanford Encyclopedia of Philosophy</em> (Spring 2022 ed.): Metaphysics Research Lab, Stanford University. URL: <a href="https://plato.stanford.edu/entries/liberalism/" target="_blank">https://plato.stanford.edu/entries/liberalism/</a></li>
  <li>Epstein, B. (2024). Social Ontology. In E. N. Zalta &amp; U. Nodelman (Eds.), <em>The Stanford Encyclopedia of Philosophy</em> (Spring 2024 ed.): Metaphysics Research Lab, Stanford University. URL: <a href="https://plato.stanford.edu/entries/social-ontology/" target="_blank">https://plato.stanford.edu/entries/social-ontology/</a></li>
  <li>Kuchem, M. D. (2020). Young, Gilbert, and Social Groups. <em>Social Theory and Practice, 46</em>(4), 737-763. Retrieved from <a href="http://www.jstor.org/stable/45302464" target="_blank">http://www.jstor.org/stable/45302464</a></li>
  <li>Machan, T. (2000). Liberalism and Atomistic Individualism. <em>Journal of Value Inquiry, 34</em>(2-3), 227-247. Retrieved from <a href="https://www.proquest.com/scholarly-journals/liberalism-atomistic-individualism/docview/203901387/se-2" target="_blank">https://www.proquest.com/scholarly-journals/liberalism-atomistic-individualism/docview/203901387/se-2</a></li>
  <li>Nussbaum, M. C. (2015). <em>혐오와 수치심. [Hiding from Humanity: Disgust, Shame, and the Law]</em>. (조계원, Trans.): 민음사.</li>
  <li>Young, I. M. (2017). <em>차이의 정치와 정의. [Justice and the Politics of Difference].</em> (김도균 &amp; 조국, Trans.): 모티브북.</li>
  <li>이석배, &amp; 김필수. (2012). 의료영역에서 인간의 존엄, 생명, 생명권의 관계. [Verhaltnisse zwischen Menschenwurde, Lebenschutz und Lebensrecht in der Medizin]. <em>한국의료법학회지, 20</em>(2), 247-265. URL: <a href="https://kiss.kstudy.com/ExternalLink/Ar?key=3720655" target="_blank">https://kiss.kstudy.com/ExternalLink/Ar?key=3720655</a></li>
  <li>최바름. (2023). <em>권리중심 공공일자리 사업에서 최중증발달장애인의 노동자되기: 권리, 인간됨, 노동</em>. (석사). 연세대학교 대학원. URL: <a href="https://www.riss.kr/link?id=T16810468" target="_blank">https://www.riss.kr/link?id=T16810468</a></li>
</ul>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>자유주의는 단일한 사상이 아니고, 구체적인 주장과 근거들이 이론가마다 다르다. 일반적으로 자유주의는 순수한 선택자로서의 추상적인 ‘개인’ 관념을 전제하지만, 시대에 따라서 학자에 따라서 그 견해가 다양하다. 자유주의에 관한 Courtland, et al.의 글이 공부에 도움되리라 생각한다. <del>사실 나도 아직 3.4절만 읽어봄</del> (Courtland et al., 2022). <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>이러한 관점을 원자적 개인주의라고 한다. 원자적 개인주의 (atomistic individualism)란 서로 분리된 원자로 이해되는 개인으로부터 사회가 만들어진다는 입장이다 (Epstein, 2024). 원자적 개인주의에 대한 다양한 입장에 관해서는 Machan의 글을 보라 (Machan, 2020). <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3" role="doc-endnote">
      <p>물론 정신 능력에 근거하는 인격 개념은 한계가 뚜렷하다. 한 사람이 인격 내지 인간됨을 가지는지 직관적으로 와닿지 않는 경우도 있기 때문이다. 예컨대 갓 태어난 신생아, 의식이 소실된 뇌사 상태의 환자, 판단 능력이 결여된 인지증 (치매) 환자 등의 사례를 생각해보자. 이들이 모두 인간이라는 점은 분명하다. 하지만 정신 능력에 근거하는 인격 개념을 택한다면 이들이 인격을 지니는지가 불분명해진다. 인격 개념을 바라보는 여러 관점에 대해서는 최바름의 학위 논문 1.2.2절을 보라 (최바름, 2023). <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4" role="doc-endnote">
      <p>이후 자유주의 이론은 우리가 어떻게 문화와 사회 집단의 일부이면서도 우리 삶을 스스로 설계하는 자율적인 선택자이기도 한지에 관한 문제에 초점을 두게 된다 (Courtland et al., 2022). <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:5" role="doc-endnote">
      <p>후설 (Husserl, E.), 헤겔 (Hegel, G.W.F.), 셸러 (Scheler), 미드 (Mead, G.H.), 버거와 루크만 (Berger, P.L. &amp; Luckmann, T.), 매킨타이어 (MacIntyre, A.), 굴드 (Gould, C), 테일러 (Taylor, C.), 데이비스 (Davis, J.B.), 영 (Young, I.), 길버트 (Gilbert, M.) 등 여러 이론가들은 개인들이 사회적으로 구성된다는 각자의 관점을 제시하였다; 버틀러 (Bulter, J.)와 해스랭어 (Haslanger, S.) 등은 실천 (practice)에 초점을 두어, 개인이 세계 속의 객체와 상호작용한다는 점이나 개인의 실천과 수행이 사회⋅문화에 의존적이라는 점을 짚어내기도 한다. ‘사회적으로 구성되는 개인’에 대한 이론들에 관해서는 Epstein의 저서 3.4절 ‘Socially Constituted Building Blocks’을 보라 (Epstein, 2024). <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:6" role="doc-endnote">
      <p>성별, 나이, 국적, 섹슈얼리티, 계급 등이 대표적인 사회 집단이다. <a href="#fnref:6" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:7" role="doc-endnote">
      <p>상대가 나를 인식한 이후에 나에게 여러 속성을 덧붙이는 것이 아니라, ‘여러 속성을 가진 나’로서 나를 인식한다는 의미이다. <a href="#fnref:7" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>Tope</name></author><category term="blog" /><category term="philosophy" /><summary type="html"><![CDATA[모 비공개 글에서 아이디어를 얻어, 전통적 자유주의 관점에서 전제되는 개인주의적 사회관이 어떻게 비판되는지에 대해 알아보고 정리해보고자 한다. 이 주제는 이미 수많은 학자들이 자세히 다루었는데, 그중 특히 정치철학자 아이리스 영 (Iris Marion Young)의 저서「차이의 정치와 정의」에 드러난 그녀의 견해를 주로 참고하였다.]]></summary></entry><entry xml:lang="ko"><title type="html">Nested Unordered Lists에서 bullet style 커스터마이징하기</title><link href="http://localhost:4000/work/2024/03/29/obsidian-bullet-nested" rel="alternate" type="text/html" title="Nested Unordered Lists에서 bullet style 커스터마이징하기" /><published>2024-03-29T00:00:00+09:00</published><updated>2024-03-29T00:00:00+09:00</updated><id>http://localhost:4000/work/2024/03/29/obsidian-bullet-nested-ko</id><content type="html" xml:base="http://localhost:4000/work/2024/03/29/obsidian-bullet-nested"><![CDATA[<h2 id="intro">Intro</h2>
<p>Obsidian은 nested list의 각 레벨에 모두 동일한 기호를 사용합니다. 이때 CSS (Cascading Style Sheets)를 수정하여 레벨 별로 다르게 쓸 수 있습니다.
아래에서는 이 방법들을 살펴보겠습니다. <!--more--></p>

<h2 id="solution-1---zenmotos">Solution 1 - ZenMoto’s</h2>
<p><a href="https://forum.obsidian.md/u/ZenMoto" target="_blank">ZenMoto</a>가 <a href="https://forum.obsidian.md/t/problems-encountered-when-modifying-unordered-lists-styles-with-css/53824/2" target="_blank">Obsidian forum post</a>에서 답한 내용이 도움이 되었습니다.</p>

<p>CSS에 대한 기초적인 개념은 W3Schools의 <a href="https://www.w3schools.com/css/css_list.asp">CSS Styling Lists</a> 튜토리얼을 참고하길 추천드립니다.</p>

<h3 id="한계">한계</h3>
<p>Unordered list가 ordered list 내부에 들어있을 경우, 우리가 원하지 않는 방식으로 나옵니다.</p>

<ul>
  <li>우리가 원하는 것:</li>
</ul>
<p align="left">
  <img src="/files/img/expect-sol1.png" width="30%" />
</p>
<ul>
  <li>실제 결과:</li>
</ul>
<p align="left">
  <img src="/files/img/actual-sol1.png" width="30%" />
</p>

<style>
.copy-code-button {
position: relative;
display: block;
color: #fff;
background: #3B3B3B;
border: none;
border-radius: 8px;
}

.copy-code-button:after {
  position: absolute;
  content: "";
  width: 100%;
  height: 0;
  top: 0;
  left: 0;
  z-index: -1;
  background: #e0e5ec;
  transition: all 0.3s ease;
}

.copy-code-button:hover {
background: #fff;
  color: #3B3B3B;
}

.copy-code-button:hover:after {
  top: auto;
  bottom: 0;
  height: 100%;
}
.copy-code-button:active {
  top: 2px;
}


.copy-code-button.btnBorder {
  box-shadow: 0px 0px 0px 0px #1d1d1d;
}

.copy-code-button.btnBorder:hover {
  box-shadow: 0px 0px 0px 5px #1d1d1d;
}
</style>

<div class="code-header">
    <button class="copy-code-button">
      Copy code to clipboard
    </button>
</div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/*========ZenMoto's Script=========*/</span>

<span class="c">/* LEVEL 1 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-1</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Bullet */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 2 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-2</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Dash */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">7px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 3 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-3</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Hollow Bullet */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">Transparent</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
    <span class="nl">border-style</span><span class="p">:</span> <span class="nb">solid</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">border-width</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 4 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-4</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Solid Square */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 5 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-5</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Dash */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">7px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 6 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-6</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Hollow Square */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">Transparent</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
    <span class="nl">border-style</span><span class="p">:</span> <span class="nb">solid</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">border-width</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 7 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-source-view.mod-cm6</span> <span class="nc">.HyperMD-list-line-7</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Small Bullet */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* bullet color */</span>
<span class="nd">:root</span> <span class="p">{</span> <span class="py">--bullet-new-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">89</span><span class="p">,</span><span class="m">89</span><span class="p">,</span><span class="m">223</span><span class="p">);}</span>
</code></pre></div></div>

<h2 id="solution-2---한계-보완됨">Solution 2 - 한계 보완됨</h2>
<p>이를 해결하고자 저는 Zenmoto의 코드를 약간 변형시켰습니다. Source-view mode에서는 스타일이 적용되지 않지만, preview mode에서는 스타일이 적용됩니다. Source-view mode에 관해서는 <code class="language-plaintext highlighter-rouge">.markdown-source-view.mod-cm6</code>를 수정해야 하는데, 이 부분은 잘 알지 못하여 따로 스타일을 적용하지 못했습니다.</p>

<p><a href="https://forum.obsidian.md/t/problems-encountered-when-modifying-unordered-lists-styles-with-css/53824/2" target="_blank">ZenMoto’s solution</a>을 약간 변형한 코드:</p>

<style>
.copy-code-button {
position: relative;
display: block;
color: #fff;
background: #3B3B3B;
border: none;
border-radius: 8px;
}

.copy-code-button:after {
  position: absolute;
  content: "";
  width: 100%;
  height: 0;
  top: 0;
  left: 0;
  z-index: -1;
  background: #e0e5ec;
  transition: all 0.3s ease;
}

.copy-code-button:hover {
background: #fff;
  color: #3B3B3B;
}

.copy-code-button:hover:after {
  top: auto;
  bottom: 0;
  height: 100%;
}
.copy-code-button:active {
  top: 2px;
}


.copy-code-button.btnBorder {
  box-shadow: 0px 0px 0px 0px #1d1d1d;
}

.copy-code-button.btnBorder:hover {
  box-shadow: 0px 0px 0px 5px #1d1d1d;
}
</style>

<div class="code-header">
    <button class="copy-code-button">
      Copy code to clipboard
    </button>
</div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* LEVEL 1 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Bullet */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 2 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Dash */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">7px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 3 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Hollow Bullet */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">Transparent</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
    <span class="nl">border-style</span><span class="p">:</span> <span class="nb">solid</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">border-width</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 4 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Solid Square */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 5 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Dash */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">7px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 6 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Hollow Square */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">Transparent</span><span class="p">;</span>
    <span class="nl">border-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
    <span class="nl">border-style</span><span class="p">:</span> <span class="nb">solid</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">0%</span><span class="p">;</span>
    <span class="nl">border-width</span><span class="p">:</span> <span class="m">1px</span><span class="p">;</span>
<span class="p">}</span> 

<span class="c">/* LEVEL 7 */</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span><span class="o">,</span>
<span class="nc">.markdown-reading-view</span> <span class="nt">ol</span><span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nt">ul</span> <span class="o">&gt;</span> <span class="nt">li</span> <span class="o">&gt;</span> <span class="nc">.list-bullet</span><span class="nd">:after</span> <span class="p">{</span>
<span class="c">/* Small Bullet */</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">2px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">50%</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="n">var</span><span class="p">(</span><span class="n">--bullet-new-color</span><span class="p">);</span>
<span class="p">}</span> 

<span class="c">/* bullet color */</span>
<span class="nd">:root</span> <span class="p">{</span> <span class="py">--bullet-new-color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="m">89</span><span class="p">,</span><span class="m">89</span><span class="p">,</span><span class="m">223</span><span class="p">);}</span>

</code></pre></div></div>
<p>Level 1 ~ level 3에 스타일을 적용하면 다음 결과를 볼 수 있습니다:</p>
<p align="left">
  <img src="/files/img/nested_unordered_list.png" width="40%" />
</p>

<h3 id="한계-1">한계</h3>
<p>두 방법 모두 PDF로 export된 문서에서는 적용되지 않는 것 같고요, HTML 파일에서는 부분적으로만 적용되는 듯합니다.</p>]]></content><author><name>Tope</name></author><category term="work" /><category term="obsidian" /><summary type="html"><![CDATA[Intro Obsidian은 nested list의 각 레벨에 모두 동일한 기호를 사용합니다. 이때 CSS (Cascading Style Sheets)를 수정하여 레벨 별로 다르게 쓸 수 있습니다. 아래에서는 이 방법들을 살펴보겠습니다.]]></summary></entry><entry xml:lang="ko"><title type="html">Obsidian에서 지정한 부분만 특정 폰트 사용하기 - Google Font</title><link href="http://localhost:4000/work/2024/03/19/obsidian-google-font.html" rel="alternate" type="text/html" title="Obsidian에서 지정한 부분만 특정 폰트 사용하기 - Google Font" /><published>2024-03-19T00:00:00+09:00</published><updated>2024-03-19T00:00:00+09:00</updated><id>http://localhost:4000/work/2024/03/19/obsidian-google-font</id><content type="html" xml:base="http://localhost:4000/work/2024/03/19/obsidian-google-font.html"><![CDATA[<h2 id="상황">상황</h2>
<p>Obsidian같은 markdown 파일에서 지정한 부분만 특정한 폰트를 사용하기를 원할 수 있다. 이는 HTML 파일에서 CSS를 사용하여 폰트를 설정하는 일반적인 방법을 사용하면 해결할 수 있다. 
<!--more--></p>
<ul>
  <li>예컨대 한자를 읽을 수 있도록 보여주는 폰트를 사용하고자 할 때, Google Font의 “Noto Sans KR” 폰트를 사용하고 싶을 수 있다.</li>
  <li>Noto Sans KR 폰트는 “https://fonts.google.com/noto/specimen/Noto+Sans+KR”에서 확인할 수 있다.</li>
</ul>

<p align="center">
  <img src="/files/img/google_font.png" width="90%" />
</p>

<h2 id="방법">방법</h2>
<ol>
  <li>Obsidian에서 사용하는 CSS Snippet에 다음을 추가한다. 폰트를 import하는 단계이다.
    <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@import</span> <span class="sx">url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&amp;display=swap')</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>해당 폰트에 대한 span class를 생성한다.
    <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.your-custom-class</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s2">'FONT_NAME'</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <p>가령 Noto Sans KR 폰트에 대해서 다음 스크립트를 CSS에 추가한다.</p>
    <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.noto-sans-kr</span> <span class="p">{</span>
<span class="err"> </span> <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"Noto+Sans+KR"</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
<span class="err"> </span> <span class="py">font-optical-sizing</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="err"> </span> <span class="nl">font-weight</span><span class="p">:</span> <span class="m">400</span><span class="p">;</span>
<span class="err"> </span> <span class="nl">font-style</span><span class="p">:</span> <span class="nb">normal</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>MD 파일에서 span element를 다음과 같이 사용한다.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>소련의 대(&lt;span class="noto-sans-kr"&gt;對&lt;/span&gt;)한 정책
</code></pre></div>    </div>
    <p>실제로 한자가 제대로 표시되는 것을 알 수 있다.</p>
  </li>
</ol>

<p>CSS에 관한 기본적인 개념과 규칙에 생소하다면 <a href="https://developer.mozilla.org/ko/docs/Web/CSS" target="_blank">CSS MDN WebDocs</a>을 참고하는 것도 좋을 것 같다.</p>]]></content><author><name>Tope</name></author><category term="work" /><category term="obsidian" /><summary type="html"><![CDATA[상황 Obsidian같은 markdown 파일에서 지정한 부분만 특정한 폰트를 사용하기를 원할 수 있다. 이는 HTML 파일에서 CSS를 사용하여 폰트를 설정하는 일반적인 방법을 사용하면 해결할 수 있다.]]></summary></entry><entry xml:lang="en"><title type="html">What Happened in Feb 29? - Interactive plot with {plotly}</title><link href="http://localhost:4000/work/2024/02/28/Feb-29-int.html" rel="alternate" type="text/html" title="What Happened in Feb 29? - Interactive plot with {plotly}" /><published>2024-02-28T00:00:00+09:00</published><updated>2024-02-28T00:00:00+09:00</updated><id>http://localhost:4000/work/2024/02/28/Feb-29-int</id><content type="html" xml:base="http://localhost:4000/work/2024/02/28/Feb-29-int.html"><![CDATA[<p>As part of the <a href="https://github.com/rfordatascience/tidytuesday/blob/master/data/2024/2024-02-27/readme.md" target="_blank">tidytuesday challenge this week (2024-02-27)</a>, I made an interactive timeline plot about events happened on February 29 a.k.a. ‘Leap Day’. One can get their cursor on dots to see what happened on February 29 that year.
 <!--more--></p>

<p>The interactive plot below is optimized for desktop viewing.</p>
<iframe src="/files/interactive_page/event_plotly_post.html" height="543px" width="768px" style="border:none;"></iframe>

<ul>
  <li>R script to create the above plot is in <a href="https://github.com/gaba-tope/tidytuesday/blob/f72d532324a18a24e07b2b1c375e132701a15b33/2024/2024-02-27/2024-02-27%20(Leap%20Day).R" target="_blank">tidytuesday/2024/2024-02-27/2024-02-27 (Leap Day).R</a>.</li>
  <li>This is virtually the first time creating a plot with {plotly} package, and it took me a few hours to adjust to their grammars and rules. Let’s dive into my script!</li>
</ul>

<h1 id="data-import">Data Import</h1>
<p>Loading a dataset from tidytuesday github repository as usual ~ <br /></p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tuesdata</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tidytuesdayR</span><span class="o">::</span><span class="n">tt_load</span><span class="p">(</span><span class="s1">'2024-02-27'</span><span class="p">)</span><span class="w">
</span><span class="n">events</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tuesdata</span><span class="o">$</span><span class="n">events</span><span class="w">
</span></code></pre></div></div>

<h1 id="data-wrangling">Data Wrangling</h1>
<ol>
  <li>I introduced a <code class="language-plaintext highlighter-rouge">num</code> column to assign a unique number to each row corresponding to a specific year. This distinction allows for separate plotting of each row.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">events_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">year</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row_number</span><span class="p">())</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>A <code class="language-plaintext highlighter-rouge">year_int</code> column was added to group years into intervals of 25, with a filter applied to include only those after 1900.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">events_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">events_data</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">rowwise</span><span class="p">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">year_int</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cut</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">870</span><span class="p">,</span><span class="w"> </span><span class="m">2020</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">25</span><span class="p">),</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">include.lowest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
        </span><span class="n">as.factor</span><span class="p">()</span><span class="w">
      </span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">filter</span><span class="p">(</span><span class="n">year</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">1900</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>For enhanced readability in the plot’s tooltip, I created a <code class="language-plaintext highlighter-rouge">tooltip</code> column. Using the <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/strwrap" target="_blank"><code class="language-plaintext highlighter-rouge">base::strwrap()</code></a> function, I formatted the event descriptions with line breaks at word boundaries (determined by the specified <code class="language-plaintext highlighter-rouge">width</code> parameter). The lines were then combined using the <code class="language-plaintext highlighter-rouge">paste()</code> function, incorporating <code class="language-plaintext highlighter-rouge">&lt;br&gt;</code> HTML tags for line breaks. For those using tidyverse, <a href="https://stringr.tidyverse.org/reference/str_wrap.html" target="_blank"><code class="language-plaintext highlighter-rouge">stringr::str_wrap()</code></a> can be a good alternative for <code class="language-plaintext highlighter-rouge">base::strwrap()</code>.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">events_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">events_data</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">rowwise</span><span class="p">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">tooltip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glue</span><span class="o">::</span><span class="n">glue</span><span class="p">(</span><span class="s2">"&lt;b&gt;In {year}:&lt;/b&gt;&lt;br&gt;{event}"</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
       </span><span class="n">strwrap</span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
       </span><span class="n">paste</span><span class="p">(</span><span class="n">collapse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&lt;br&gt;"</span><span class="p">))</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">year_ano</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.character</span><span class="p">(</span><span class="n">year</span><span class="p">))</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>I often assign a dataset to another object to be incorporated into a plot script. This makes it easier for me to make a test plot using test datasets.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">main_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">events_data</span><span class="w">
</span><span class="n">main_data</span><span class="w">
</span><span class="c1">#&gt; # A tibble: 28 × 6</span><span class="w">
</span><span class="c1">#&gt; # Rowwise: </span><span class="w">
</span><span class="c1">#&gt;     year event                                     num year_int tooltip year_ano</span><span class="w">
</span><span class="c1">#&gt;    &lt;dbl&gt; &lt;chr&gt;                                   &lt;int&gt; &lt;fct&gt;    &lt;chr&gt;   &lt;chr&gt;   </span><span class="w">
</span><span class="c1">#&gt;  1  1908 James Madison University is founded at…     1 42       &lt;b&gt;In … 1908    </span><span class="w">
</span><span class="c1">#&gt;  2  1912 The Piedra Movediza (Moving Stone) of …     1 42       &lt;b&gt;In … 1912    </span><span class="w">
</span><span class="c1">#&gt;  3  1916 Tokelau is annexed by the United Kingd…     1 42       &lt;b&gt;In … 1916    </span><span class="w">
</span><span class="c1">#&gt;  4  1916 In South Carolina, the minimum working…     2 42       &lt;b&gt;In … 1916    </span><span class="w">
</span><span class="c1">#&gt;  5  1920 The Czechoslovak National Assembly ado…     1 42       &lt;b&gt;In … 1920    </span><span class="w">
</span><span class="c1">#&gt;  6  1936 The February 26 Incident in Tokyo ends.     1 43       &lt;b&gt;In … 1936    </span><span class="w">
</span><span class="c1">#&gt;  7  1940 For her performance as Mammy in Gone w…     1 43       &lt;b&gt;In … 1940    </span><span class="w">
</span><span class="c1">#&gt;  8  1940 Finland initiates Winter War peace neg…     2 43       &lt;b&gt;In … 1940    </span><span class="w">
</span><span class="c1">#&gt;  9  1940 In a ceremony held in Berkeley, Califo…     3 43       &lt;b&gt;In … 1940    </span><span class="w">
</span><span class="c1">#&gt; 10  1944 The Admiralty Islands are invaded in O…     1 43       &lt;b&gt;In … 1944    </span><span class="w">
</span><span class="c1">#&gt; # ℹ 18 more rows</span><span class="w">
</span></code></pre></div>    </div>
  </li>
</ol>

<h1 id="plotting-with-plotly">Plotting with {plotly}</h1>
<p>Before plotting, <code class="language-plaintext highlighter-rouge">hline</code> function was created. It takes <code class="language-plaintext highlighter-rouge">y</code> parameter to decide at which y coordinate the horizontal line will be plotted.<br /></p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># To add horizontal line in plotly</span><span class="w">
</span><span class="n">hline</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"line"</span><span class="p">,</span><span class="w">
    </span><span class="n">x0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w">
    </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w">
    </span><span class="n">xref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
    </span><span class="n">y0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w">
    </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w">
    </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">color</span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<ol>
  <li>Plotly object <code class="language-plaintext highlighter-rouge">plot_ly()</code> was created.
    <ul>
      <li>Additional plotly layers can be added by passing the preceding object to next plotly function using the pipe operator (<code class="language-plaintext highlighter-rouge">%&gt;%</code> or <code class="language-plaintext highlighter-rouge">|&gt;</code>).</li>
    </ul>
  </li>
  <li>The function <code class="language-plaintext highlighter-rouge">add_markers()</code> was called to add a scatter plot.
    <ul>
      <li>The x-axis represents the year of events, while the y-axis shows the unique number assigned to events ocurring in the same year. Different y-values are for separately visualizing events in the same year.</li>
      <li>The tilde (<code class="language-plaintext highlighter-rouge">~</code>) makes the subsequent object to be searched within the dataframe specified in <code class="language-plaintext highlighter-rouge">data</code> parameter. That is, <code class="language-plaintext highlighter-rouge">~year</code>, <code class="language-plaintext highlighter-rouge">~num</code>, and <code class="language-plaintext highlighter-rouge">~tooltip</code> refer to the corresponding columns in the tibble <code class="language-plaintext highlighter-rouge">main_data</code>.</li>
      <li>The <code class="language-plaintext highlighter-rouge">marker</code> parameter defines the properties of points for the scatter plot.</li>
      <li>Setting <code class="language-plaintext highlighter-rouge">color = ~year_int</code> ensures that colors are applied by the values in <code class="language-plaintext highlighter-rouge">year_int</code> column, showing the change of time by color spread.</li>
      <li>Setting <code class="language-plaintext highlighter-rouge">hoverinfo = "text"</code> ensures that the tooltip text of each point will be those in a <code class="language-plaintext highlighter-rouge">tooltip</code> column in <code class="language-plaintext highlighter-rouge">main_data</code>, as shown in <code class="language-plaintext highlighter-rouge">text = ~tooltip</code>.</li>
      <li>The <code class="language-plaintext highlighter-rouge">hoverlabel</code> parameter defines the properties of hovertext or tooltip.<br />
        <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">event_plotly</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plot_ly</span><span class="p">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
</span><span class="n">add_markers</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_data</span><span class="p">,</span><span class="w">
       </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scatter"</span><span class="p">,</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"markers"</span><span class="p">,</span><span class="w">
       </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
       </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">num</span><span class="p">,</span><span class="w">
       </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">tooltip</span><span class="p">,</span><span class="w">
       </span><span class="n">marker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w">
                     </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
                       </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
                       </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w">
                     </span><span class="p">)),</span><span class="w">
       </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year_int</span><span class="p">,</span><span class="w">
       </span><span class="n">colors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cols_vec_ly</span><span class="p">,</span><span class="w">
       </span><span class="n">hoverinfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
       </span><span class="n">showlegend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w">
       </span><span class="n">hoverlabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w">
                         </span><span class="n">bordercolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transparent"</span><span class="p">,</span><span class="w">
                         </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"oswald"</span><span class="p">,</span><span class="w">
                                     </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">,</span><span class="w">
                                     </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"white"</span><span class="w">
                                     </span><span class="p">),</span><span class="w">
                         </span><span class="n">align</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"left"</span><span class="w">
                         </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">add_annotations()</code> function was used to incorporate the year of each event under in the plot, as well as subtitles and captions outside the plot.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="n">add_annotations</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">main_data</span><span class="p">,</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">),</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
             </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="p">(</span><span class="n">num</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="w">
             </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w">
             </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_font</span><span class="p">),</span><span class="w">
             </span><span class="n">textangle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-90</span><span class="p">,</span><span class="w">
             </span><span class="n">showarrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w">
             </span><span class="n">textposition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bottom center"</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">add_annotations</span><span class="p">(</span><span class="n">xref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
             </span><span class="n">yref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-0.07</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.09</span><span class="p">,</span><span class="w">
             </span><span class="n">showarrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
             </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subtitle_event_ly</span><span class="p">,</span><span class="w">
             </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_font</span><span class="p">,</span><span class="w">
                         </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">,</span><span class="w">
                         </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="w">
                         </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">add_annotations</span><span class="p">(</span><span class="n">xref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
             </span><span class="n">yref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"paper"</span><span class="p">,</span><span class="w">
             </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-0.07</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-0.2</span><span class="p">,</span><span class="w">
             </span><span class="n">showarrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
             </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">caption_ly</span><span class="p">,</span><span class="w">
             </span><span class="n">align</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"left"</span><span class="p">,</span><span class="w">
             </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_font</span><span class="p">,</span><span class="w">
                         </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">,</span><span class="w">
                         </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="w">
                         </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
</span></code></pre></div>    </div>
  </li>
  <li>Miscellaneous layout properties were specified using <code class="language-plaintext highlighter-rouge">layout()</code> function.
    <ul>
      <li>Background colors were specified by <code class="language-plaintext highlighter-rouge">plot_bgcolor</code> and <code class="language-plaintext highlighter-rouge">paper_bgcolor</code> parameter.</li>
      <li>The title of the plot is added with the <code class="language-plaintext highlighter-rouge">title()</code> parameter.</li>
      <li>The properties of the x-axis and the y-axis were defined by <code class="language-plaintext highlighter-rouge">xaxis</code> and <code class="language-plaintext highlighter-rouge">yaxis</code> parameter, respectively.</li>
      <li>The horizontal line at <code class="language-plaintext highlighter-rouge">y = 1</code> were added by <code class="language-plaintext highlighter-rouge">shapes</code> parameter, using <code class="language-plaintext highlighter-rouge">hline()</code> function defined above.<br />
        <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">layout</span><span class="p">(</span><span class="n">plot_bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bg_col</span><span class="p">,</span><span class="w">
    </span><span class="n">paper_bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bg_col</span><span class="p">,</span><span class="w">
    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">title_event_ly</span><span class="p">,</span><span class="w"> 
                 </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.02</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.97</span><span class="p">,</span><span class="w">
                 </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_font</span><span class="p">,</span><span class="w">
                             </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">,</span><span class="w">
                             </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span><span class="p">)),</span><span class="w">
    </span><span class="n">xaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
       </span><span class="n">zerolinecolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">,</span><span class="w">
       </span><span class="n">zerolinewidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
       </span><span class="n">nticks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w">
       </span><span class="n">range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1895</span><span class="p">,</span><span class="w"> </span><span class="m">2025</span><span class="p">),</span><span class="w">
       </span><span class="n">tick0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1900</span><span class="p">,</span><span class="w"> 
       </span><span class="n">dtick</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">25</span><span class="p">,</span><span class="w"> 
       </span><span class="n">tickmode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"linear"</span><span class="p">,</span><span class="w">
       </span><span class="n">gridcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">major_grid_col</span><span class="p">,</span><span class="w">
       </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&lt;b&gt;Year&lt;/b&gt;"</span><span class="p">,</span><span class="w"> 
                    </span><span class="n">font</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_font</span><span class="p">,</span><span class="w">
                                </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">,</span><span class="w">
                                </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">15</span><span class="p">)),</span><span class="w">
       </span><span class="n">tickfont</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_font</span><span class="p">,</span><span class="w">
                       </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text_col</span><span class="p">)</span><span class="w">
       </span><span class="p">),</span><span class="w">
    </span><span class="n">yaxis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
      </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="n">zeroline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
      </span><span class="n">showline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
      </span><span class="n">showticklabels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
      </span><span class="n">showgrid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
      </span><span class="n">range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-0.03</span><span class="p">,</span><span class="w"> </span><span class="m">3.5</span><span class="p">)</span><span class="w">
    </span><span class="p">),</span><span class="w">
    </span><span class="n">shapes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">hline</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)),</span><span class="w">
    </span><span class="n">autosize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
    </span><span class="n">margin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">80</span><span class="p">,</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
 </span><span class="n">event_plotly</span><span class="w">
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>The <code class="language-plaintext highlighter-rouge">event_plotly</code> object was saved as a html file with the <code class="language-plaintext highlighter-rouge">htmlwidgets::saveWidget()</code> function.
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">htmlwidgets</span><span class="o">::</span><span class="n">saveWidget</span><span class="p">(</span><span class="n">event_plotly</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"event_plotly.html"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div>    </div>
  </li>
</ol>

<h1 id="add-font-dependency">Add Font Dependency</h1>
<p>If you are to embed your Plotly plot to website and use a custom font, it would be better to add a font dependency in the Plotly object. I initially encountered the issue that the plot displayed the custom font in R viewer and Chrome on my computer but not in browsers on other computers. It appeared that font information should be added to the Plotly object so that the saved HTML file would have details about the designated font. Thanks to the <a href="https://github.com/plotly/plotly.R/issues/2117" target="_blank">discussion raised by ‘fnavarro94’ and commented on by ‘cttnguyen’</a> for their guidance in solving the issue.  <br />
First, load a font and create a CSS string as shown in the following code.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Fonts &amp; Colors ---------------------------------------------------</span><span class="w">
</span><span class="n">font_add_google</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Oswald"</span><span class="p">,</span><span class="w"> </span><span class="n">family</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"oswald"</span><span class="p">)</span><span class="w">
</span><span class="n">showtext_auto</span><span class="p">()</span><span class="w">
</span><span class="n">main_font</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"oswald"</span><span class="w">
</span><span class="c1"># Font dependency for plotly</span><span class="w">
</span><span class="n">oswald_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">showtextdb</span><span class="o">::</span><span class="n">google_fonts</span><span class="p">(</span><span class="s2">"Oswald"</span><span class="p">)</span><span class="o">$</span><span class="n">regular_url</span><span class="w"> 
</span><span class="n">font_css</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="w">
  </span><span class="s2">"&lt;style type = 'text/css'&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"@font-face { "</span><span class="p">,</span><span class="w">
  </span><span class="s2">"font-family: 'oswald'; "</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"src: url('"</span><span class="p">,</span><span class="w"> </span><span class="n">oswald_file</span><span class="p">,</span><span class="w"> </span><span class="s2">"'); "</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"}"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"&lt;/style&gt;"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>Then, incorporate the CSS string to your Plotly object as the following script. <a href="https://rstudio.github.io/htmltools/reference/htmlDependency.html" target="_blank"><code class="language-plaintext highlighter-rouge">htmltools::htmlDependency()</code></a> function is used to add HTML dependencies like CSS.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">event_plotly</span><span class="o">$</span><span class="n">dependencies</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w">
  </span><span class="n">event_plotly</span><span class="o">$</span><span class="n">dependencies</span><span class="p">,</span><span class="w">
  </span><span class="nf">list</span><span class="p">(</span><span class="w">
    </span><span class="n">htmltools</span><span class="o">::</span><span class="n">htmlDependency</span><span class="p">(</span><span class="w">
      </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"oswald"</span><span class="p">,</span><span class="w">
      </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">  
      </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="n">head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">font_css</span><span class="w"> 
    </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<p>This ensures that your plot displays the designated font, regardless where it is viewed.</p>

<p>For those who are not familiar with CSS which is a style sheet language, <a href="https://developer.mozilla.org/en-US/docs/Web/CSS" target="_blank">CSS MDN WebDocs</a> may be helpful to understand the basics of CSS.</p>

<h1 id="embed-plotly-to-jekyll-blog">Embed Plotly to Jekyll Blog</h1>
<p>Since this github page was built using Jekyll, you may use iframe element to incorporate Plotly object into a post.</p>
<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"/files/interactive_page/event_plotly_post.html"</span> <span class="na">height=</span><span class="s">"543px"</span> <span class="na">width=</span><span class="s">"768px"</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
</code></pre></div></div>]]></content><author><name>Tope</name></author><category term="work" /><category term="Visualization" /><category term="tidytuesday" /><summary type="html"><![CDATA[As part of the tidytuesday challenge this week (2024-02-27), I made an interactive timeline plot about events happened on February 29 a.k.a. ‘Leap Day’. One can get their cursor on dots to see what happened on February 29 that year.]]></summary></entry><entry xml:lang="en"><title type="html">서울시 행정동별 평균 소득 시각화 - Interactive plot with {leaflet}</title><link href="http://localhost:4000/work/2024/02/23/seoul-dong-int.html" rel="alternate" type="text/html" title="서울시 행정동별 평균 소득 시각화 - Interactive plot with {leaflet}" /><published>2024-02-23T00:00:00+09:00</published><updated>2024-02-23T00:00:00+09:00</updated><id>http://localhost:4000/work/2024/02/23/seoul-dong-int</id><content type="html" xml:base="http://localhost:4000/work/2024/02/23/seoul-dong-int.html"><![CDATA[<p>이전에 만들어본 <a href="/work/2023/12/24/seoul-dong-visual.html">서울시 행정동별 평균 소득 plot</a>을 사용자가 이리저리 살펴볼 수 있게 만들어 보았어요. 
<!--more--></p>

<iframe src="/files/interactive_page/map_leaflet.html" height="600px" width="100%" style="border:none;"></iframe>

<p><a href="https://github.com/gaba-tope/Visualizations/blob/04bd7c6c96bb4fa6898e6f70c50e9f1b664517d8/Seoul_2023_Dong_income_expenditure/Seoul_Dong_income_exp.R" target="_blank">Visualizations/Seoul_2023_Dong_income_expenditure</a>에 사용한 R script가 있으니 확인해 보아도 좋겠습니다.</p>

<p>Leaflet을 처음 사용하여 interactive choropleth map을 만드는 경우라면 <a href="https://rstudio.github.io/leaflet/index.html" target="_blank">An R Interface to Leaflet Maps</a>를 읽어보길 추천해요.</p>

<p>아래에서는 핵심 코드를 살펴보겠습니다. 이전에 사용하고 다듬은 데이터셋과 객체들을 그대로 사용합니다.</p>

<h1 id="data-wrangling">Data Wrangling</h1>
<ol>
  <li><a href="/work/2023/12/24/seoul-dong-visual.html">이전 포스트</a>에서 combined_data와 map_seoul_gu의 EPSG를 5179로 맞추었죠. 하지만 leaflet 패키지로 사용할 shape file 등은 좌표계 (CRS; Coordinate Reference System)가 <a href="https://rstudio.github.io/leaflet/articles/projections.html" target="_blank">WGS84 (= EPSG:4326)이어야</a> 하므로, <code class="language-plaintext highlighter-rouge">sf::st_transform()</code>을 이용하여 변환합니다.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">combined_data_l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">st_transform</span><span class="p">(</span><span class="n">combined_data</span><span class="p">,</span><span class="w"> </span><span class="m">4326</span><span class="p">)</span><span class="w">
</span><span class="n">map_seoul_gu_l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">st_transform</span><span class="p">(</span><span class="n">map_seoul_gu</span><span class="p">,</span><span class="w"> </span><span class="m">4326</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>색칠에 사용할 팔레트를 만들어야겠죠? <code class="language-plaintext highlighter-rouge">leaflet::colorNumeric</code>은 주어진 팔레트와 데이터를 짝짓는 함수를 리턴합니다.
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">colorNumeric</span><span class="p">(</span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Purples"</span><span class="p">,</span><span class="w"> </span><span class="n">domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">combined_data_l</span><span class="o">$</span><span class="n">mean_income</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>구 이름을 쓸 위치값을 객체에 저장합니다. 구 이름을 어디에 쓰면 좋을까요? 아마 각 구의 가운데 위치 부근에 쓰면 좋겠죠. <a href="https://r-spatial.github.io/sf/reference/geos_unary.html" target="_blank"><code class="language-plaintext highlighter-rouge">sf::st_centroid()</code></a>는 각 polygon geometry의 무게중심 (centroid) 좌표를 sf 객체로 리턴합니다. <br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cent_seoul_gu</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">st_centroid</span><span class="p">(</span><span class="n">map_seoul_gu_l</span><span class="p">)</span><span class="w"> 
</span></code></pre></div>    </div>
  </li>
</ol>

<h1 id="plotting-with-leaflet">Plotting with {leaflet}</h1>
<ol>
  <li>leaflet 객체를 생성합니다. Pipe operator (|&gt;)를 통해 leaflet 객체에 요소를 덧붙일 수 있어요. <code class="language-plaintext highlighter-rouge">addTiles()</code>를 통해 base map, 그러니까 배경에 깔리는 기본 지도를 추가합니다.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">leaflet</span><span class="p">)</span><span class="w">
</span><span class="n">l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">leaflet</span><span class="p">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">addTiles</span><span class="p">()</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
</span></code></pre></div>    </div>
  </li>
  <li>구 지도와 구 이름을 덧붙입시다. <code class="language-plaintext highlighter-rouge">addPolygons()</code>를 통해 구 지도를, <code class="language-plaintext highlighter-rouge">addLabelOnlyMarkers()</code>를 통해 구 이름을 추가했다는 것을 이해할 수 있겠죠?<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="n">addPolygons</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map_seoul_gu_l</span><span class="p">,</span><span class="w">
           </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w">
           </span><span class="n">fillColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"transparent"</span><span class="p">,</span><span class="w">
           </span><span class="n">fillOpacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gu"</span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
  </span><span class="n">addLabelOnlyMarkers</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cent_seoul_gu</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="o">~</span><span class="n">SIG_KOR_NM</span><span class="p">,</span><span class="w"> 
                   </span><span class="n">labelOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">labelOptions</span><span class="p">(</span><span class="n">noHide</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'top'</span><span class="p">,</span><span class="w"> </span><span class="n">textOnly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w">
                                               </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
                                                 </span><span class="s2">"font-family"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"noto-sans"</span><span class="p">,</span><span class="w">
                                                 </span><span class="s2">"font-style"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"bold"</span><span class="p">,</span><span class="w">
                                                 </span><span class="s2">"font-size"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"15px"</span><span class="w">
                                               </span><span class="p">))</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>행정동 지도를 추가합니다. <br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">addPolygons</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">combined_data_l</span><span class="p">,</span><span class="w">
           </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#1a1a1a"</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">dashArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
           </span><span class="n">fillColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">pal</span><span class="p">(</span><span class="n">mean_income</span><span class="p">),</span><span class="w"> </span><span class="n">fillOpacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w">
           </span><span class="n">highlightOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">highlightOptions</span><span class="p">(</span><span class="w">
             </span><span class="n">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
             </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"#666"</span><span class="p">,</span><span class="w">
             </span><span class="n">dashArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
             </span><span class="n">fillOpacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w">
             </span><span class="n">bringToFront</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="w">
           </span><span class="p">),</span><span class="w">
           </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">labels</span><span class="p">,</span><span class="w">
           </span><span class="n">labelOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">labelOptions</span><span class="p">(</span><span class="w">
             </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="s2">"font-weight"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"normal"</span><span class="p">,</span><span class="w"> </span><span class="n">padding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3px 8px"</span><span class="p">),</span><span class="w">
             </span><span class="n">textsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"15px"</span><span class="p">,</span><span class="w"> </span><span class="n">direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"auto"</span><span class="w">
           </span><span class="p">)</span><span class="w">
  </span><span class="p">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> 
</span></code></pre></div>    </div>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">color</code>, <code class="language-plaintext highlighter-rouge">weight</code>, <code class="language-plaintext highlighter-rouge">dashArray</code>는 각각 선의 색, 선의 두께, 선의 종류를 지정하는 파라미터입니다.</li>
      <li><code class="language-plaintext highlighter-rouge">fillColor = ~pal(mean_income)</code> 파라미터값은 무슨 뜻일까요?
<code class="language-plaintext highlighter-rouge">pal()</code>함수에 <code class="language-plaintext highlighter-rouge">mean_income</code>을 넣으면 데이터 수에 맞는 팔레트가 생성됩니다. 그 팔레트를 사용하겠다는 의미에요.</li>
      <li>한편 <code class="language-plaintext highlighter-rouge">highlightOptions</code>는 마우스 커서를 특정 polygon 또는 subpolygon에 갖다 대었을 때 (hover) 어떤 변화를 일으킬지 지정하는 파라미터입니다.</li>
      <li><code class="language-plaintext highlighter-rouge">label</code>은 마우스 커서를 특정 polygon에 갖다 대었을 때 (hover) 나오는 툴팁 (tooltip)에 표시할 내용을 지정하는 파라미터입니다. 사전에 만든 <code class="language-plaintext highlighter-rouge">labels</code> 객체는 다음과 같이 html 형식의 문자열을 포함하는 list입니다.<br />
        <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">labels</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">sprintf</span><span class="p">(</span><span class="w">
</span><span class="s2">"&lt;strong&gt;%s&lt;/strong&gt;&lt;br/&gt;평균 %s원"</span><span class="p">,</span><span class="w">
</span><span class="n">combined_data</span><span class="o">$</span><span class="n">EMD_KOR_NM</span><span class="p">,</span><span class="w"> </span><span class="n">format</span><span class="p">(</span><span class="n">formattable</span><span class="o">::</span><span class="n">comma</span><span class="p">(</span><span class="n">combined_data</span><span class="o">$</span><span class="n">mean_income</span><span class="p">,</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'d'</span><span class="p">),</span><span class="w">
                              </span><span class="n">scientific</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">lapply</span><span class="p">(</span><span class="n">htmltools</span><span class="o">::</span><span class="n">HTML</span><span class="p">)</span><span class="w">
</span></code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Plot legend (범례)를 추가합니다.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="n">addLegend</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">combined_data_l</span><span class="p">,</span><span class="w">
         </span><span class="n">pal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pal</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="n">mean_income</span><span class="p">,</span><span class="w"> </span><span class="n">opacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w">
         </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"평균 소득 (원)"</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>Leaflet 객체를 html로 저장합니다.<br />
    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">htmlwidgets</span><span class="o">::</span><span class="n">saveWidget</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"map_leaflet.html"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div>    </div>
  </li>
</ol>

<h1 id="leaflet을-jekyll-post에-삽입하기">Leaflet을 jekyll post에 삽입하기</h1>
<p>이 웹사이트는 jekyll을 이용하여 만든 github pages입니다. 제가 만든 interactive plot를 게시글에 어떻게 넣을 수 있을까요?<br /> 바로 iframe 요소를 사용하면 leaflet이나 plotly 등으로 만든 html 파일을 jekyll post에 넣을 수 있습니다.<br /></p>
<div class="language-md highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;iframe</span> <span class="na">src=</span><span class="s">"/files/interactive_page/map_leaflet.html"</span> <span class="na">height=</span><span class="s">"600px"</span> <span class="na">width=</span><span class="s">"100%"</span> <span class="na">style=</span><span class="s">"border:none;"</span><span class="nt">&gt;&lt;/iframe&gt;</span>
</code></pre></div></div>
<p><a href="https://jayrobwilliams.com/posts/2020/09/jekyll-html" target="_blank">Rob Williams의 포스트</a>에도 이에 관한 설명이 잘 되어 있으니 참고해볼만 하겠습니다.</p>]]></content><author><name>Tope</name></author><category term="work" /><category term="Visualization" /><summary type="html"><![CDATA[이전에 만들어본 서울시 행정동별 평균 소득 plot을 사용자가 이리저리 살펴볼 수 있게 만들어 보았어요.]]></summary></entry></feed>